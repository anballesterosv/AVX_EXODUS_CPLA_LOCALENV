window.walkMeGermany = true;
window._walkmeWebpackJP&&_walkmeWebpackJP([2],Array(88).concat([function(t,e,r){var n=_walkmeInternals.ctx,a=n.get("PlatformDI"),i=n.get("Consts");n.register("WalkthrusModule").asCtor(r(89)).dependencies("Lib, DataFixer, SiteConfigManager, WalkthrusContainer, SettingsValuesRetriever, Logger, Consts, ArrayUtils, CommonEvents, CommonUtils, WalkthruRedirectService, TimerManager, PositionHelper, BalloonsContainer, CurrentWalkthruData, WalkthruStatePersister, PlayGuidGenerator, AuditSourceManager, UiUtils, FramesetsUtils, StepRetriever, FeaturesManager, InputGenerator, StepUtils, ComplexHtmlElementsProvider, LibDestroyer,BalloonDrawerProvider, LocationMatcher, DeployableTypes"),n.register("StepRetriever").asCtor(r(90)).dependencies("WalkthrusContainer"),n.register("WalkthruOnBeforeUnloadHandler").asCtor(r(91)).dependencies("Logger, WalkthrusModule, TimerManager, CrossDomainManager, FeaturesManager, FlowStack, WindowBeforeUnloadHandler"),n.register("WalkthrusContainer").asCtor(r(92)),n.register("CurrentWalkthruData").asCtor(r(93)).dependencies("WalkthrusContainer, Consts"),n.register("CurrentStepUI").asCtor(r(94)).dependencies("CurrentWalkthruData, StepUtils"),n.register("WalkthruStatePersister").asCtor(r(95)).dependencies("Consts, InteractionManager, WalkthrusContainer, CommonUtils, CurrentWalkthruData, WalkthruBranchData, CommonEvents"),n.register("WalkthruStateRestorer").asCtor(r(96)).dependencies("WalkthruStepsLoader, WalkthrusContainer, CurrentWalkthruData, InteractionManager, TimerManager, WalkthrusModule, Logger, SettingsValuesRetriever, CommonEvents, WalkthruStatePersister, WalkthruBranchPlayer, Consts, WalkthruBranchData, LibDestroyer, UserGuidContainer"),n.register("WalkthruStepsLoader").asCtor(r(97)).dependencies("SettingsFile, WmAjax, DataFixer, CommonUtils, StepUtils, Logger, LanguageManager,SiteConfigManager, WalkthrusContainer"),n.register("WalkthruBranchPlayer").asCtor(r(98)).dependencies("Logger, StepRetriever, WalkthrusModule, WalkthrusContainer, Lib, TimerManager, CommonEvents, Consts, CurrentWalkthruData, WalkthruStatePersister, ArrayUtils, WalkthruBranchData, CommonUtils"),n.register("WalkthruApi").asCtor(r(99)).dependencies("WalkthrusContainer, SiteConfigManager, Consts, WalkMeVisibilityChecker, CommonEvents,SettingsValuesRetriever, LabelsContainer, Logger").asSingleton(),n.register("WalkthruLegacyExternalApi").asCtor(r(100)).dependencies("WalkthrusModule, CurrentWalkthruData, WalkthrusContainer, WalkthruBranchPlayer, Logger"),n.register("WalkthruBranchData").asCtor(r(101)),n.register("WalkthruBalloonButtonsEventsBinder").asCtor(r(102)).dependencies("CurrentWalkthruData, Consts, WalkthrusModule, CommonEvents, WalkthruBranchPlayer, BalloonsContainer, LibDestroyer, FeaturesManager, BalloonButtonsEventsBinder"),n.register("WalkthruBalloonNotifier").asCtor(r(103)).dependencies("BalloonUtils, Consts, UiUtils, TimerManager, Lib, CdnServer, BalloonButtonsEventsBinder,TopContainerProvider, CurrentStepUI, HostData, FramesetsUtils"),n.register("WalkthruPopupNotificationsService").asCtor(r(104)).dependencies("PopupNotificationsService, WalkthruBalloonNotifier"),n.register("StepUtils").asCtor(r(105)).dependencies("Consts"),n.register("WalkthruSurveyActivator").asCtor(r(106)).dependencies("DeployableSurveyActivator, AuditStepsManager, StorageKeysConfigurations"),n.register("WalkthruSafeStartHandler").asCtor(r(107)).dependencies("Consts, AuditStepsManager, WalkthruRedirectService, CurrentWalkthruData, WalkthruStatePersister, AuditSafeStartManager"),n.register("WalkthrusSiteConfigDataMigrator").asCtor(r(108)).dependencies("WalkthrusContainer, WalkthrusModule, DataFixer"),n.register("DataFileWalkthruDataAppender").asCtor(r(109)).dependencies("WalkthrusContainer, WalkthrusSiteConfigDataMigrator, DeployableTypes, DataFileDataLoader, LibInitializer, TutorialsManager"),n.register("EndUserWalkthruDataConverter").asCtor(r(110)).dependencies("Consts, StepUtils, DeployablesManagerFactory, CommonUtils, ClientOrServerStorageManager, EndUserDataConverter"),n.register("WalkthrusDestroyer").asCtor(r(111)).dependencies("WalkthrusModule, TriggersManager, WalkthruBalloonNotifier, WmInternals, Consts, AuditSourceProvider"),n.register("WalkthruJawsAccessibilityUtil").asCtor(r(112)).dependencies("StepUtils, JawsAccessibilityUtil"),n.register("WalkthruEventDataAppender").asCtor(r(113)).dependencies("CurrentWalkthruData"),n.register("WalkthruEventsInitializer").asCtor(r(114)).dependencies("ApiEventRaisersContainer, WalkthruEventDataAppender"),n.register("WalkthruStartFailureHandler").asCtor(r(115)).dependencies("CommonEvents, AuditSourceProvider, SettingsValuesRetriever, WalkthrusModule"),n.register("WalkthruActionsFactory").asCtor(r(116)).dependencies("ActionsFactory, Lib, ClientOrServerStorageManager, Consts, ClientStorageManager, CommonEvents, WalkthruRedirectService, StepRetriever, WalkthrusContainer, CurrentWalkthruData, WalkthruStatePersister, WalkthrusModule, WalkthruBranchPlayer, DebuggerManager, TimerManager, Logger, ConditionCheckerFactory, CrossDomainManager, WalkthruStepsLoader, CommonUtils"),n.register("WalkthruRedirectService").asCtor(r(117)).dependencies("RedirectService, TimerManager, WalkthruStatePersister"),n.register("TriggersManager").asCtor(r(118)).dependencies("TimerManager,FramesetsUtils,StepUtils,Logger,FeaturesManager,SiteConfigManager,ConditionTreeTraverser,CommonEvents,Consts,ClickTriggersListCreator,WalkthrusModule,CurrentWalkthruData,WalkthruStatePersister,WalkthruBranchPlayer,LibDestroyer,EventBinder,HostData,ConditionCheckerFactory, SettingsValuesRetriever, WalkthruOnBeforeUnloadHandler, BackButtonUtils"),n.register("BackButtonUtils").asCtor(r(119)).dependencies("WalkthrusModule, Consts, CurrentWalkthruData, StepUtils"),n.register("PlayManager").asCtor(r(120)).dependencies("FeaturesManager, Consts, WalkthrusModule, WalkthrusContainer, Logger"),n.register("BBCodeWalkthruActivator").asCtor(r(121)).dependencies("InitiatorTypeToAppTypeMapper, CommonEvents, WalkthruStepsLoader, BBCodeDeployables, Consts"),n.register("BBCodeWalkthruSurveyActivator").asCtor(r(122)).dependencies("CurrentWalkthruData, BBCodeSurveyActivator, Consts"),n.register("WalkthruPopupStepElementFinderExtension").asCtor(r(123)).dependencies("StepUtils, PopupStepElementProvider"),n.register("WalkthruActionStepElementFinderExtension").asCtor(r(124)).dependencies("StepUtils, PopupStepElementProvider"),n.register("WalkthrusModuleInitializer").asCtor(r(125)).dependencies("Lib, WalkthruOnBeforeUnloadHandler, DataFileWalkthruDataAppender, EndUserWalkthruDataConverter,AnchorTagsFixer, BBCodeWalkthruActivator, WalkthrusModule, RunningDeployablesStopper,BBCodeWalkthruSurveyActivator, WalkthrusDestroyer, AutoStartTypes, DeployableTypes,WalkthruRunningState, WalkthruActionsFactory, WalkthruJawsAccessibilityUtil, WalkthruStateRestorer,DeployablesRestorer, WalkthruPopupStepElementFinderExtension, WalkthruActionStepElementFinderExtension,ElementFinderExtensionsProvider, WalkthruConditionFunctions, WalkthruConditionEvaluator,OwnershipManagerProvider, Consts, WalkthruOwnershipManager,SafeStartHandlerProvider, WalkthruSafeStartHandler, WmInternals, AutoStartHelper, WalkthruAutoStartHelper"),n.register("WalkthruOwnershipManager").asCtor(r(126)).dependencies("CrossDomainManager, Consts, WalkthrusModule, WalkthruPassOwnershipDeterminator, WalkthrusContainer,CurrentWalkthruData, WalkthruStatePersister, StepRetriever, WalkMeInfo, WalkthruStateRestorer, Logger, PassOwnershipNextStepProvider, FeaturesManager, TimerManager, PreExecutionPassOwnershipWrapper, ClientStorageManager"),n.register("PassOwnershipNextStepProvider").asCtor(r(127)).dependencies("ClientStorageManager, Consts, WalkthrusContainer, UserGuidContainer"),n.register("WalkthruPassOwnershipDeterminator").asCtor(r(128)).dependencies("Consts"),a.register([i.PLATFORM.Web,i.PLATFORM.MobileWeb],function(){n.register("WalkthruAutoStartHelper").asCtor(r(129)).dependencies("DeployableTypes, WalkthrusContainer, WalkthrusModule, WalkthruPersistenceDataRetriever, Consts")}),n.register("WalkthruPersistenceDataRetriever").asCtor(r(130)).dependencies("WalkthruStatePersister, Consts, CurrentWalkthruData"),n.register("WalkthruRunningState").asCtor(r(131)).dependencies("WalkthruPersistenceDataRetriever, WalkthrusModule, Consts"),n.register("AnchorTagsFixer").asCtor(r(132)).dependencies("HostData, WalkthruOnBeforeUnloadHandler"),n.register("WalkthruConditionEvaluator").asCtor(r(133)).dependencies("CurrentWalkthruData, StepRetriever, ConditionEvaluator"),n.register("WalkthruConditionFunctions").asCtor(r(134)).dependencies("Lib, ExternalConditionsHandlers, WalkthrusContainer, StepRetriever, WalkthrusModule, CurrentWalkthruData, Consts"),n.register("AuditWtsManager").asCtor(r(135)).dependencies("DeployableTypes, EventSender, ReportInitiatorMapper, AuditingEnabledIndicator"),n.register("AuditStepsManager").asCtor(r(136)).dependencies("ServerDataSenderManager,WalkMeInfo,Logger,HostData,Consts,CommonUtils,EventSender, AuditSafeStartManager, StepActionToEventSenderStepActionNameMapper, SettingsValuesRetriever, StepActionToEventSenderActionAppTypeMapper, CommonEvents, PlayGuidGenerator, AuditingEnabledIndicator, WmInternals"),n.register("WalkthruActionClickedEventBinder").asCtor(r(137)).dependencies("ActionClickedEventBinder, Consts, SharedConsts, AuditStepsManager")},function(t,e){function r(t,e,r,n,a,i,o,s,u,l,c,p,d,S,g,T,f,I,h,E,k,v,_,A,m,C,W,y,N){var P=this;P.setTutorials=G,P.isTutorialPackageHidden=X,P.canShowTutorial=tt,P.stopTutorial=lt,P.startNewTutorial=pt,P.tutorialFinished=It,P.executeTutorialNextStep=Et,P.postWelcomeStep=Yt,P.executeCurrentStep=zt,P.executePreviousStep=Jt,P.getAction=F,P.getSiteConfigByTutorialId=Q,P.isTutorialIdsExist=z,P.isStepTrigger=J,P.terminateTutorial=ut,P.checkTutorialSkipFirstStepCondition=rt,P.fillMissingStepAudits=ft,P.getNextStepIncludingSplit=At,P.releaseEvents=Lt,P.stepWasCompleted=bt,P.getPlayConditionMode=Ft,P.checkPlayStepCondition=Kt,P.executeTutorialStep=Wt,P.checkIfStepExistsWithSkippables=jt,P.isStepPlayable=Xt,P.checkTutorialRedirectCondition=nt,P.loadTutorial=it,P.releaseBalloonsTimeouts=st,P.resetState=dt,P.cleanCurrentStepResources=Zt,P.addCurrentStepResource=qt,P.setMember=L,P.removeCrossUsersState=St,P.getMatchedSurvey=Tt,P.getWalkthruSurveyFrequency=gt;var x={tutorialRunSettingsMap:{},dontContinueTutorial:!1,executeTutorialNextStepNotFinished:!1},R={URL:0,FIRST_STEP_MUST_EXIST:1,AUTO_START:2,REDIRECT:3,SKIP_FIRST_STEP:4},w="PSCTMode";function L(t,e){x[t]=e}var O="stepCheck",U={},M=[],D=!1,b=0,B=[];function H(){_walkmeInternals.ctx.get("WmInternals").on(o.EVENTS.Flows.BeforeFlowStarted,function(){St()})}function G(t){U={};for(var a=0;a<t.length;a++)t[a].Steps&&e.fixSteps(t[a],r.get());n.setWalkthrus(t)}function F(t){if(void 0!=U[t.Id])return U[t.Id];var e=a.getSettingsValue(t.Settings,"action",null);if(!e)return i.customerLog("No action core. aborting..."),null;return U[t.Id]=_walkmeInternals.ctx.get("ActionsFactory").get(e.actionType,e.arguments,o.STEP_PLAY_INITIATOR_ENUM.STEP,t),U[t.Id]}function K(t){if(!M||0==M.length)return!1;for(var e=[],r=void 0,n=!1;M.length>0;){if(r=M.pop(),r.id==t){n=!0;break}e.push(r)}if(e.length>0)for(;e.length>0;)M.push(e.pop());return n}function V(t){for(var e=0;e<M.length;e++){var r=M[e];if(r.id==t)return!0}return!1}function Y(t,e){M.push({id:t.Id,mode:e})}function j(t){var e=n.getWalkthruByIndex(t);if(x.tutorialRunSettingsMap[e.TutorialId]){var a=x.tutorialRunSettingsMap[e.TutorialId].siteConfig;a&&r.set(a)}}function Q(t){var e;return e=x.tutorialRunSettingsMap[t]?x.tutorialRunSettingsMap[t].siteConfig:r.get()}function X(t){var e=x.tutorialRunSettingsMap[t.TutorialId];if(!e)return!1;return e.isPackageHidden}function z(t){var e=s.map(t,n.getWalkthruIndexByWalkthruId),r=s.inArray(-1,e);return void 0==r||r==-1}function J(t,e){if("number"==typeof t)return t==e;for(var r=t.split(","),n=0;n<r.length;n++)if(e+""==r[n])return!0;return!1}function q(t,e,r,a){for(var i=e;i<r;i++)if(a!=o.STEP_STATUS.SkippedByActionStep){var s=n.getWalkthruByIndex(t);u.deprecatedRaiseEvent("NewSkippedStep",s.Steps[i])}}function Z(t,e){var r=Array();if(!t.Conditions)return r;for(var n=0;n<t.Conditions.length;n++)t.Conditions[n].Type==e&&(void 0!=t.Conditions[n].IsEnabled&&1!=t.Conditions[n].IsEnabled||r.push(t.Conditions[n]));return r}function $(t){return Z(t,R.FIRST_STEP_MUST_EXIST).length>0}function tt(e){if(0==e.IsVisible)return!1;for(var r=Z(e,R.URL),n=!1,o=0;o<r.length;o++)if(et(e,r[o])){n=!0;break}if(r.length>0&&!n)return!1;var s=a.getSettingsValue(e.Settings,"DOCTEnabled",0);if(1==s){var l=a.getSettingsValue(e.Settings,"DOCT","");if(""!=l)try{var c=_walkmeInternals.ctx.get("ConditionCheckerFactory").createOld({trackUIChange:!0,featureName:"Walk-Thru Segmenation",elementName:e.Name}),p=c.getCurrentEvaluationValueAndStopEvaluating(l);if(u.deprecatedRaiseEvent("WtConditionEvaluated",e),!p)return u.deprecatedRaiseEvent("CannotShowWt",e),!1}catch(d){}}if($(e)){if(0==e.Steps.length)return!1;var S=e.Steps[0];return i.customerLog('First Step Condition for "'+(S.StepTitle||S.StepText)+', Walk-Thru "'+e.Name+'"'),t.findElement(S)}return u.deprecatedRaiseEvent("CanShowWt",e),!0}function et(t,e){switch(e.Type){case R.URL:return!!y.isLocationMatchString(e.Content);default:i.error(new Error("Invalid condition type: "+e.Type))}}function rt(t){for(var e=n.getWalkthruByIndex(t),r=Z(e,R.SKIP_FIRST_STEP),a=0;a<r.length;a++){var o=r[a];if(y.isLocationMatchString(o.Content)){var s=o.ExtraData,u=s?s-1:1;return i.customerLog("The walk-thru has a skip step condition ("+o.Content+") which is true. Skipping to: "+u),u}}return 0}function nt(t,e){var r=n.getWalkthruByIndex(t),a=Z(r,R.REDIRECT);if(0==a.length)return!1;return at(a[0],e)}function at(t,e){var r=t.Content;return e?c.redirect(r):c.canRedirect(r)}function it(t,e,r,a,s,c){try{_walkmeInternals.ctx.get("WalkmeVisibleReporter").report(),g.stepAppearanceIndex=0;var p=n.getWalkthruByIndex(t);u.deprecatedRaiseEvent(o.EVENTS.Walkthrus.WalkthruLoaded,p),j(t),_walkmeInternals.ctx.get("ContentsManager").removeContent(),a=l.defaultValue(a,f.generateNewPlayGuid(p.TutorialId)),r=l.defaultValue(r,!0),e=l.defaultValue(e,0);var d=void 0==c?e:c;0===e&&(e=rt(t)),ot(t,e,a,s,[],[],[]);try{s=s||{type:o.STEP_PLAY_INITIATOR_ENUM.NONE},_walkmeInternals.ctx.get("AuditWtsManager").auditWalkthruStart(p,s,d,e,a)}catch(S){i.error(S)}I.get()!=o.SOURCES.play&&_walkmeInternals.ctx.get("WalkMeGoalsManager").startWatchingDeployable(p,a),Yt(t)}catch(T){i.error(T)}}function ot(t,e,r,n,a,i,s){st(),C.releaseBalloons(),g.state=o.WALKTHRU_STATE.RUNNING,g.currentWalkthru=t,g.currentStep=e-1,g.stepPlayHistory=a,g.stepPlayStack=i,g.stepCompletedHistory=s,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID=r,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=n,T.storeStateInCookie()}function st(){p.stopTimeoutsArray("playTimeouts"),x.executeTutorialNextStepNotFinished=!1}function ut(){g.stepPlayStack=[],C.releaseBalloons(),st(),u.raiseEvent("WalkthruAborted")}function lt(t,e,r){u.deprecatedRaiseEvent(o.EVENTS.Walkthrus.WalkthruStopped,g.getCurrentStep()),st(),r||C.releaseBalloons(),g.state=o.WALKTHRU_STATE.NOT_RUNNING,h.removeOverlay();var n=g.currentStep;if(g.currentStep=-1,t||T.storeStateInCookie(),_walkmeInternals.ctx.get("CrossDomainManager")&&_walkmeInternals.ctx.get("CrossDomainManager").get().enabled()&&_walkmeInternals.ctx.get("CrossDomainManager").get().reset(),!e){var a=g.getCurrentWalkthru();ct(a,n,o.SURVEY_START_EVENTS.WalkThruExited)}}function ct(t,e,r){if(t&&t.Settings.survey){var n=t.Settings.survey.surveyId,a=gt(t.Settings.survey,r);if(a){var i={objectId:t.Id,type:o.STEP_PLAY_INITIATOR_ENUM.WALKTHRU};_walkmeInternals.ctx.get("WalkthruSurveyActivator").activateSurvey(t,r,i,n,a,void 0,e)}}}function pt(t,e,r,a){var s=n.getWalkthruByIndex(t);return _walkmeInternals.ctx.get("WalkthruStepsLoader").afterStepsLoaded(s&&s.TutorialId,function(){return c()});function c(){try{i.customerLog("startNewTutorial : Index = "+t+". From Step = "+e+" testMode: "+r),h.fixFlash(),j(t);var n=!1;if(_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=a,e=l.defaultValue(e,0),r=l.defaultValue(r,!1),_walkmeInternals.ctx.get("FlowsPlayer").abort(),!r){if(g.state!=o.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP&&!_walkmeInternals.ctx.get("WalkthruOwnershipManager").walkthruStarted(t,e))return!0;dt(!0,!0),_walkmeInternals.ctx.get("CrossDomainManager").get().enabled()||St(),_walkmeInternals.ctx.get("WalkthruBalloonNotifier").closePopup()}u.deprecatedRaiseEvent(o.EVENTS.Walkthrus.WalkthruStarted,s);var c=[],p=e;e=_walkmeInternals.ctx.get("PlayManager").findFirstStep(t,e,c);var d=0==e;if(e>0&&!r){var S=I.get();S==o.SOURCES.play||S==o.SOURCES.preview?q(t,p,e,o.STEP_STATUS.SkippedStartedFromBiggerStep):(n=!0,ft(t,0,e,o.STEP_STATUS.SkippedStartedFromBiggerStep))}else 0==e&&(e=rt(t),e>0&&!r&&(n=!0,ft(t,0,e,o.STEP_STATUS.SkippedByTutorialCondition)));if(!nt(t,!1)&&e<0){if(r)return!1;_walkmeInternals.ctx.get("AuditStepsManager").createPlayGuidIfNeeded(s.TutorialId);var T={tutorialIndex:t,wt:s,checkStepExistsTrace:c};if(!_walkmeInternals.ctx.get("DeployableSafeStartExecuter").handleSafeStart(N.Tutorial,s,T)){for(var f=0;f<c.length;f++){var E=c[f].stepStatus==o.STEP_STATUS.SupposedToShow;_walkmeInternals.ctx.get("AuditStepsManager").auditStep(s,s.Steps[c[f].stepIndex],c[f].stepStatus,E),q(t,c[f].stepIndex,c[f].stepIndex+1,c[f].stepStatus)}var k=c[c.length-1].stepIndex,v=s;_walkmeInternals.ctx.get("WalkthruStartFailureHandler").handle(v,k),dt()}}else{if(r)return!0;it(t,e,d,n?_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID:void 0,a,p)}}catch(_){return i.error(_),!1}return u.deprecatedRaiseEvent("WtHasGuid",s,{playGuid:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),u.raiseEvent(o.EVENTS.Walkthrus.WalkthruGuidGenerated,{playGuid:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),!0}}function dt(t,e){g.currentWalkthru=-1,g.state=o.WALKTHRU_STATE.NOT_RUNNING,g.currentStep=-1,g.splitPointStack=[],g.stepPlayHistory=[],g.stepPlayStack=[],g.stepCompletedHistory=[],g.lastBackButtonStepIndex=-1,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID="",x.executeTutorialNextStepNotFinished=!1,U={},x.dontContinueTutorial=!1,D=!1,t||(_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=null),e||T.storeStateInCookie()}function St(){for(var t=_walkmeInternals.ctx.get("UserGuidContainer").getAllUserGuids(),e=0;e<t.length;e++){var r=t[e];_walkmeInternals.ctx.get("ClientStorageManager").removeData(o.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,r)}}function gt(t,e){var r=Tt(t,e);return r&&(r.repeat||"visit")}function Tt(t,e){if(t.startCondition==e||t.startCondition==o.SURVEY_START_EVENTS.Both)return t}function ft(t,e,r,a){for(var i=e;i<r;i++){var o=n.getWalkthruByIndex(t);_walkmeInternals.ctx.get("AuditStepsManager").auditStep(o,o.Steps[i],a)}}function It(e){C.releaseBalloons(),g.state=o.WALKTHRU_STATE.NOT_RUNNING,T.storeStateInCookie();var r=ht(),a={hadSplit:!!r,finishAfterRefresh:!!e},i=g.getCurrentWalkthru();if(u.deprecatedRaiseEvent(o.EVENTS.Walkthrus.WalkthruCompleted,i,a),h.removeOverlay(),_walkmeInternals.ctx.get("TodoListManager").updateDeployableCompleted(i.TutorialId,o.DEPLOYABLE_TYPE.Tutorial),ct(i,g.currentStep,o.SURVEY_START_EVENTS.WalkThruCompleted),r){var s=n.getWalkthruByIndex(r.tutorialIndex);u.deprecatedRaiseEvent("switchToWalkthru",s.Id),u.deprecatedRaiseEvent("BackFromBranch",s),ot(r.tutorialIndex,r.stepIndex,r.playGuid,r.playInitiator,r.stepPlayHistory,r.stepPlayStack,r.stepCompletedHistory),t.executeTutorialNextStep()}else g.stepPlayStack=[],_walkmeInternals.ctx.get("CrossDomainManager").get().loseOwnership()}function ht(){return g.splitPointStack.length>0?g.splitPointStack.pop():null}function Et(){i.customerLog("executeTutorialNextStep - Waiting for all frames to load before executing.",3),E.waitForFramesToLoad().then(kt)}function kt(){if(x.executeTutorialNextStepNotFinished)return void i.customerLog("executeTutorialNextStepNotFinished - skipping this executeTutorialNextStep",5);if(D)return D=!1,i.customerLog("executeTutorialNextStep: waiting for other window",5),i.customerLog("Waiting for other window..."),void vt();if(x.dontContinueTutorial)return void i.customerLog("executeTutorialNextStep: not executing, dontContinueTutorial=true",5);if(g.getCurrentWalkthru().Steps.length-1==g.currentStep)return void It();x.executeTutorialNextStepNotFinished=!0;var t=_t();i.customerLog(l.formatString("Next step including split is: {0} seconds",t),5,o.LOG_FEATURES.BALLOON),p.playSetTimeout(function(){g.currentStep++;function t(){x.executeTutorialNextStepNotFinished=!1,zt()}_walkmeInternals.ctx.get("WalkthruStepsLoader").afterStepsLoaded(g.getCurrentWalkthru().Id,function(){g.currentStep>0&&!J(g.getPreviousStep().End,o.WALKTHRU_STEP_TRIGGER.NOTHING)?C.releaseBalloons(t):t()})},1e3*t)}function vt(){_walkmeInternals.ctx.get("ClientStorageManager").refreshGetData(),p.playSetTimeout(function(){var t=_walkmeInternals.ctx.get("ClientStorageManager"),e=t.keysConfig.walkthru.waitForOtherWindow,r=t.getData(e.key,void 0,g.getCurrentWalkthru().userGuid);1==r?(i.customerLog("Other window finished. Resuming walk-thru here."),t.saveData(e.key,0,e.expiry,g.getCurrentWalkthru().userGuid),_walkmeInternals.ctx.get("WalkthruStateRestorer").restoreCrossUsersState()):vt()},500)}function _t(){var t=At();return null==t?0:t.Delay}function At(){return mt(g.currentWalkthru,g.currentStep,0)}function mt(t,e,r){var a=n.getWalkthruByIndex(t);if(a.Steps.length>e+1){var i=a.Steps[e+1];return i.TutorialIndex=t,i}var o=g.splitPointStack;if(o.length>r){var s=o[o.length-1-r];return mt(s.tutorialIndex,s.stepIndex-1,r+1)}return null}function Ct(){var t=g.stepPlayHistory;if(t.length<2)return!0;for(var e=0;e<t.length-1;e++){var r=n.getWalkthruByIndex(g.currentWalkthru),a=k.getStepById(t[e],r);if(!l.isDefined(a.Settings.action))return!1}return!0}function Wt(e){function s(t){i.customerLog(t,5,o.LOG_FEATURES.BALLOON)}var c=l.getTimer(s),f={};b!=e.Id&&g.stepAppearanceIndex++,e.playNumber=g.stepAppearanceIndex,b=e.Id,u.raiseEvent(o.EVENTS.Walkthrus.StepExecuting,{playNum:g.stepAppearanceIndex});var I=n.getWalkthruByIndex(g.currentWalkthru),h=l.formatString("Processing step # {0} . Step title: {1}. Walkthru: {2}",e.StepIndex+1,e.StepTitle,I.Name);if(i.customerLog(h),u.deprecatedRaiseEvent(o.EVENTS.Walkthrus.StepStarted,e),v.isFeatureEnabled("highPerf")||_walkmeInternals.ctx.get("AnchorTagsFixer").fixAnchorTagsOnBeforeUnload(),g.state!=o.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT&&g.state!=o.WALKTHRU_STATE.WAITING_FOR_ELEMENT&&g.state!=o.WALKTHRU_STATE.WAITING_FOR_CONDITION){var E=A.isActionStep(e)?o.STEP_STATUS.Shown:o.STEP_STATUS.SupposedToShow;_walkmeInternals.ctx.get("AuditStepsManager").auditStep(g.getCurrentWalkthru(),e,E)}var _=Ft(e),C=P.checkPlayStepCondition(e);if(!C&&(_==o.playConditionModes.PLAY_CONDITION||_==o.playConditionModes.BOTH&&g.state!=o.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT))return i.customerLog("Play step condition is false. Skipping step."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(g.getCurrentWalkthru(),e,o.STEP_STATUS.SkippedByCondition),u.deprecatedRaiseEvent(o.EVENTS.Walkthrus.StepSkipped,e),void Et();if(Gt(e)){var y=jt(g.currentWalkthru,e.StepIndex,0,1,void 0,o.CHECK_STEP_MODE.Normal);if(y==-1)return i.customerLog("Keep looking for element after popup."),u.deprecatedRaiseEvent(o.EVENTS.Walkthrus.LookingForStepElement,e,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),g.state=o.WALKTHRU_STATE.WAITING_FOR_ELEMENT,p.playSetTimeout(function(){zt()},500),void T.storeStateInCookie();if(y==-2||y==-5){var N="Play condition isn't met, skipping the popup.";return y==-5&&(N="Loop detecetd"),i.customerLog(N),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(g.getCurrentWalkthru(),e,o.STEP_STATUS.SkippedNotFound),u.deprecatedRaiseEvent(o.EVENTS.Walkthrus.StepSkipped,e),void Et()}}var x=void 0;if(C||g.state!=o.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT){var R={},w=l.getTimer(s);i.customerLog("Step - Play Condition"),x=t.findElement(e,null,R),f.FETime=w("Done looking for sticky step named "+(e.StepTitle||e.StepText)+" with id "+b),e.Score=R.score}else i.customerLog("Sticky PlayCondition isn't met."),x=!1;if(x){if(x&&x!==!0){i.customerLog("Element found:"),i.customerLog(x);var L,O=m.getComplexHtmlElements(e,x);O&&(x=O.elements,L=O.parentElement)}u.deprecatedRaiseEvent(o.EVENTS.Walkthrus.StepElementFound,e),u.raiseEvent("BeforeNewStepShown");var U=g.stepPlayStack.length>0?g.stepPlayStack[g.stepPlayStack.length-1]:null,M=U?k.getStepById(U).StepIndex:null;if(Vt(e.Id),a.getSettingsValue(e.Settings,"fake",!1))return i.customerLog("This is a fake step. Continue to next step."),T.storeStateInCookie(),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(g.getCurrentWalkthru(),e,o.STEP_STATUS.FakeFound),u.deprecatedRaiseEvent(o.EVENTS.Walkthrus.FakeStep,e),void Et();if(g.state=o.WALKTHRU_STATE.RUNNING,A.isActionStep(e))return void p.playSetTimeout(function(){F(e).doAction(),u.deprecatedRaiseEvent(o.EVENTS.Walkthrus.StepPerforming,e)},100);var B=_walkmeInternals.ctx.get("TriggersManager").handle(x,e,g.currentStep,g.currentWalkthru,M),H=B.executeNextStep,G=B.clearElementEventsFuncs,K=B.buttons;a.getSettingsValue(e.Settings,"waitOtherWindow",!1)&&(D=!0),f.logicTime=c("Finished pre-balloon logic");var V=e.StepTitle,Y=e.StepText,j=_walkmeInternals.ctx.create("Balloon",{element:x,parentElement:L,forceEmbedBalloonInIframe:!1,positionHelper:d,dontShowIoBalloon:!v.isFeatureEnabled("multSpot")&&Dt(e),isFirstStep:Ct(),stepSettings:e.Settings,text:{title:V,content:Y,subText:Ot()},end:e.End,position:e.Position,buttons:{next:K.nextButton,done:K.doneButton,back:K.backButtonStepIndex>=0},data:{balloonEntityId:e.Id,containerEntityId:e.TutorialId,type:e.Type},configuration:e.Configuration,logger:i,drawer:W.getBalloonDrawer(e.Configuration,e),siteConfig:r.get(),bindButtonsFunc:_walkmeInternals.ctx.get("WalkthruBalloonButtonsEventsBinder").addButtonEventsToBalloon,placeholderConfigurations:e.DesignTemplatePlaceholderConfigs,placeholderVariableValues:Ut(),initiatorData:{initiator:e,type:o.STEP_PLAY_INITIATOR_ENUM.STEP}});if(j.onDestroy(function(){Lt(x,elementEvents)}),j.setReleaseEvents(G),S.add(j),T.storeStateInCookie(),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(g.getCurrentWalkthru(),e,o.STEP_STATUS.Shown),v.isFeatureEnabled("jawsAccessibility")){var Q=V||Y;V&&Y&&(Q+=". "+Y),Q&&x.attr("alt",Q)}j.Show(!0,function(t,r){wmjQuery.extend(!0,f,t),Rt(r,e);var n={Element:x,Balloon:r};u.deprecatedRaiseEvent(o.EVENTS.Walkthrus.StepShown,e,n),u.deprecatedRaiseEvent(o.EVENTS.Walkthrus.StepPerforming,e,n),j.SetTimeoutOn(function(){yt()&&Nt()}),H&&(bt(),Et())}),a.getSettingsValue(e.Settings,"isSelfExecuting",!1)&&wt(e,x)}else i.customerLog("Element not found."),u.deprecatedRaiseEvent(o.EVENTS.Walkthrus.StepElementNotFound,e,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),g.state==o.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT?(i.customerLog("Step was sticky. Keep looking for the element."),u.deprecatedRaiseEvent(o.EVENTS.Walkthrus.WaitingForStickyStep,e),g.state=o.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,p.playSetTimeout(function(){zt()},500),T.storeStateInCookie()):e.IsSkippable||a.getSettingsValue(e.Settings,"skipNotExists",!1)?(A.isActionStep(e)?(i.customerLog("Action step isn't valid. Skipping to next step."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(g.getCurrentWalkthru(),e,o.STEP_STATUS.NonValidActionStep)):(i.customerLog("Skippable step. Skip to next step."),_walkmeInternals.ctx.get("AuditStepsManager").auditStep(g.getCurrentWalkthru(),e,o.STEP_STATUS.SkippedNotFound)),u.deprecatedRaiseEvent(o.EVENTS.Walkthrus.StepSkipped,e),Et()):(i.customerLog("Keep looking for the element."),u.deprecatedRaiseEvent(o.EVENTS.Walkthrus.LookingForStepElement,e,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),g.state=o.WALKTHRU_STATE.WAITING_FOR_ELEMENT,p.playSetTimeout(function(){zt()},500),T.storeStateInCookie())}function yt(){switch(g.state){case o.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT:case o.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK:case o.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE:return!0;default:return!1}}function Nt(){Pt()?(i.customerLog("Sticky - keep looking for element.",5),C.releaseBalloons(),g.state=o.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,zt()):xt()?(L("dontContinueTutorial",!1),i.customerLog("Skippable - continue to next step."),Et()):g.state!=o.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&(i.customerLog("Stopping walk-thru."),C.releaseBalloons(),g.state=o.WALKTHRU_STATE.PAUSED,u.raiseEvent("WalkthruAborted"),u.raiseEvent("WalkthruStopped"))}function Pt(){return l.getSettingsValue(g.getCurrentStep().Settings,"sticky",0)}function xt(){return g.getCurrentStep().IsSkippable}function Rt(t,e){var r={balloonDiv:t,step:e};u.raiseEvent(o.EVENTS.Walkthrus.ShowStepBalloon,r)}function wt(t,e){p.libSetTimeout(r,1e3*t.Settings.reactionTime||o.DEFAULT_REACTION_TIME);function r(){var r=n();switch(r){case o.WALKTHRU_STEP_TRIGGER.CLICK:i.customerLog("Self Executed Step - Trigger: Click",3),_.click(e);break;case o.WALKTHRU_STEP_TRIGGER.HOVER:i.customerLog("Self Executed Step - Trigger: Hover",3),_.hover(e);break;case o.WALKTHRU_STEP_TRIGGER.KEY_PRESSED:i.customerLog("Self Executed Step - Trigger: Text Input",3),_.text(e,t.Settings.selfExecuteText,void 0,void 0,t);break;case o.WALKTHRU_STEP_TRIGGER.SELECT_VALUE:var a=t.Settings.complexHtml&&t.Settings.complexHtml.val;a?(_.select(e,a),i.customerLog("Self Executed Step - Trigger: Select Value",3)):i.customerLog("SKIPPED Self Executed Step - Trigger: Select Any - not supported",3);break;default:i.customerLog("SKIPPED Self Executed Step - Trigger not supprted",3),x.dontContinueTutorial=!1,Et()}}function n(){var e=t.End.split(/,/);return e[0]==o.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON&&e.length>1?l.getInt(e[1]):l.getInt(e[0])}}function Lt(t,e){for(var r=0;r<e.length;r++)t.unbind(e[r]+".mt");return!1}function Ot(){var t=r.get().StepsInfoText,e=Ut(),n=e.totalVisibleSteps,a=e.passedVisibleSteps;return v.isFeatureEnabled("floatingsubtext")?(t=t.replace("{0}",o.SUBTEXT_CURRENT_START+a+o.SUBTEXT_CURRENT_END),t=t.replace("{1}",o.SUBTEXT_TOTAL_START+n+o.SUBTEXT_TOTAL_END)):(t=t.replace("{0}",a),t=t.replace("{1}",n)),t}function Ut(){for(var t=n.getWalkthruByIndex(g.currentWalkthru).Steps,e=0,r=0,a=0;a<t.length;a++)Mt(t[a])&&(e++,a<=g.currentStep&&r++);return{totalVisibleSteps:e,passedVisibleSteps:r}}function Mt(t){return!(t.Type==o.STEP_TYPE.Action||parseInt(a.getSettingsValue(t.Settings,"isInvisible",0))||parseInt(a.getSettingsValue(t.Settings,"fake",0)))}function Dt(t){var e=t,r=g.stepPlayHistory;if(r.length>1){var a=n.getWalkthruByIndex(g.currentWalkthru);e=k.getStepById(r[r.length-2],a)}return J(t.End,o.WALKTHRU_STEP_TRIGGER.NOTHING)||J(e.End,o.WALKTHRU_STEP_TRIGGER.NOTHING)}function bt(t){t=l.defaultValue(t,!0);var e=g.getCurrentStep();u.deprecatedRaiseEvent(o.EVENTS.Walkthrus.StepCompleted,e),Bt(e),t?(_walkmeInternals.ctx.get("AuditStepsManager").auditStep(g.getCurrentWalkthru(),e,o.STEP_STATUS.Performed),Ht(e)):_walkmeInternals.ctx.get("AuditStepsManager").auditStep(g.getCurrentWalkthru(),e,o.STEP_STATUS.MovedBack)}function Bt(t){g.stepCompletedHistory.push(t.Id)}function Ht(t){var e=a.getSettingsValue(t.Settings,"resumeOtherWindow",!1);if(e){var r=_walkmeInternals.ctx.get("ClientStorageManager"),n=r.keysConfig.walkthru.waitForOtherWindow;r.saveData(n.key,1,n.expiry,g.getCurrentWalkthru().userGuid)}}function Gt(t){if(t.Type!=o.STEP_TYPE.Popup)return!1;return 1==a.getSettingsValue(t.Settings,"popup-play-condition",0)}function Ft(t){return a.getSettingsValue(t.Settings,w,o.playConditionModes.PLAY_CONDITION)}function Kt(t){var e=a.getSettingsValue(t.Settings,"skipStepCond","");if(e.length>0)try{return!_walkmeInternals.ctx.get("ConditionEvaluator").evaluate(e)}catch(r){return!0}var n=a.getSettingsValue(t.Settings,"PSCTEnabled",0);
if(1!=n)return!A.isActionStep(t)||"never"!=a.getSettingsValue(t.Settings,"whenToFire","");var i=a.getSettingsValue(t.Settings,"PSCT","");if(""==i)return!0;try{var s=_walkmeInternals.ctx.get("ConditionTreeEvaluator").evaluate(i);return u.deprecatedRaiseEvent(o.EVENTS.Walkthrus.StepHasPlayCondition,t,{playGUID:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID}),s}catch(r){return!1}}function Vt(t){g.stepPlayHistory.push(t);var e=g.stepPlayStack.length>0?g.stepPlayStack[g.stepPlayStack.length-1]:null;e!=t&&g.stepPlayStack.push(t)}function Yt(t){if(g.currentStep==-1&&nt(t,!0))return;Et()}function jt(e,r,s,u,c,p,d){return _walkmeInternals.ctx.get("ElementFinder").wrapSession(function(){function S(t){if(!Gt(t)||1!=u)return t.StepIndex;var r=n.getWalkthruByIndex(e);if(r.Steps.length>t.StepIndex){var a=jt(e,t.StepIndex+1,s,u,c,o.CHECK_STEP_MODE.Normal);return a<0?a:t.StepIndex}}function T(t){var e=F(t);if(e.getGoToData){var r=e.getGoToData(),n=jt(r.tutorialIndex,r.stepIndex,s,u,c,o.CHECK_STEP_MODE.Normal);if(n<0)return n}else if("stopWt"==e.type)return-2;return t.StepIndex}function f(t,e){return K(e),i.customerLog("returned checking "+r+" ("+E.Id+") result: "+t,5,O),t}function I(t,e){c&&c.push({stepIndex:t,stepStatus:e})}var h=n.getWalkthruByIndex(e),E=h.Steps[r];u=l.defaultValue(u,1),s=l.defaultValue(s,0);var k=V(E.Id);if(i.customerLog("Checking if step index "+r+" ("+E.Id+") can be played. looped: "+k+" on mode:"+p,5,O),Y(E,p),k)return f(-5,E.Id);var v=Ft(E),_=!0;v!=o.playConditionModes.STICKY_CONDITION&&(_=P.checkPlayStepCondition(E));var m=a.getSettingsValue(E.Settings,"fake",!1),C=a.getSettingsValue(E.Settings,"skipNotExists",!1),W=C||E.IsSkippable||!_||m;if(I(r,Qt(W,_)),_&&!m&&i.customerLog("Step - Find Element "+(d||"")),_&&!m&&t.findElement(E))return A.isActionStep(E)?f(T(E),E.Id):A.isPopupStep(E)?f(S(E),E.Id):f(r,E.Id);var y=r+u;if(W){var N;if(y<0)return f(-2,E.Id);if(y==h.Steps.length){var x=g.splitPointStack;if(x.length>s){var R=x[x.length-1-s];return N=jt(R.tutorialIndex,R.stepIndex,s+1,u,c,o.CHECK_STEP_MODE.Normal),i.customerLog("Checking if step "+r+" ("+E.Id+") can be played. reached last step",5,O),f(N,E.Id)}return f(-2,E.Id)}return i.customerLog("Checking if step "+r+" ("+E.Id+") can be played. Skipping to: "+y,5,O),N=jt(e,y,s,u,c,o.CHECK_STEP_MODE.Normal),f(N,E.Id)}return f(-1,E.Id)})}function Qt(t,e){return t?e?o.STEP_STATUS.SkippedNotFound:o.STEP_STATUS.SkippedByCondition:o.STEP_STATUS.SupposedToShow}function Xt(t,e){var r=jt(t,e,void 0,void 0,void 0,o.CHECK_STEP_MODE.Normal);return r==e}function zt(){var t=g.getCurrentStep();_walkmeInternals.ctx.get("ElementFinder").wrapSession(function(){Wt(t)})}function Jt(){g.state=o.WALKTHRU_STATE.RUNNING,C.releaseBalloons(function(){P.stepWasCompleted(!1),g.currentStep=g.lastBackButtonStepIndex-1,P.executeTutorialNextStep()})}function qt(t){B.push(t)}function Zt(){if(!B)return;for(var t=B.length-1;t>=0;t--)B[t].cleanResources();B=[]}H()}t.exports=r},function(t,e){function r(t){var e=this;e.getStepByWalkthruAndStepIds=r,e.getStepById=n,e.getStepIndex=i;function r(e,r){var a=t.getWalkthruIndexByWalkthruId(e);if(a>-1){var i=t.getWalkthruByIndex(a),o=n(r,i);if(o)return o}return null}function n(e,r){if(r)return a(e,r);for(var n=t.getWalkthrus(),i=0;i<n.length;i++){var o=a(e,n[i]);if(o)return o}return null}function a(t,e){for(var r=e.Steps,n=0;n<r.length;n++)if(r[n].Id==t)return r[n];return null}function i(t,e){var n=r(e,t);if(n)return n.StepIndex;return-1}}t.exports=r},function(t,e){function r(t,e,r,n,a,i,o){var s=this;s.register=l,s.setIgnoreNextBeforeUnload=p;var u=!1;function l(){o.register(c)}function c(o){if(!i.isEmpty())return;t.customerLog("onbeforeunload called",1),u?u=!1:(e.setMember("dontContinueTutorial",!0),r.pauseAllTimeouts(),n.get().enabled()?n.get().loseOwnership(!1,!0):a.isFeatureEnabled("noUnload")&&d())}function p(t){u=t}function d(){r.setWalkmeTimeout(function(){e.setMember("dontContinueTutorial",!1),r.resumeAllTimeouts()},3e3)}}t.exports=r},function(t,e){function r(){var t=this;t.getWalkthrus=n,t.setWalkthrus=a,t.getWalkthruByIndex=i,t.getWalkthruById=s,t.getWalkthruIndexByWalkthruId=o,t.getStepByIndex=u;var e=[];function r(){}function n(){return e}function a(t){e=t}function i(t){return e[t]}function o(t){for(var r=-1,n=0;n<e.length;n++)if(e[n].TutorialId==t){r=n;break}return r}function s(t){for(var r=0;r<e.length;r++)if(e[r].TutorialId==t)return e[r];return null}function u(t,e){var r=i(t);if(r&&r.Steps[e])return r.Steps[e]}r()}t.exports=r},function(t,e){function r(t,e){var r=this;r.currentWalkthru=-1,r.currentStep=-1,r.stepAppearanceIndex=0,r.splitPointStack=[],r.stepPlayHistory=[],r.stepPlayStack=[],r.stepCompletedHistory=[],r.lastBackButtonStepIndex=-1,r.getCurrentWalkthru=n,r.getCurrentStep=a,r.getPreviousStep=o,r.getNextStep=i,r.getStep=s,r.state=e.WALKTHRU_STATE.NOT_RUNNING;function n(){return t.getWalkthruByIndex(r.currentWalkthru)}function a(){return s(r.currentStep)}function i(){return s(r.currentStep+1)}function o(){return s(r.currentStep-1)}function s(t){var e=n();return e&&e.Steps&&e.Steps[t]}}t.exports=r},function(t,e){function r(t,e){var r=this;r.shouldKeepOverlay=n;function n(){var r=t.getCurrentStep();return e.isSpotlightStep(r)&&a(r)}function a(t){return e.isPopupStep(t)&&i()}function i(){var r=t.getPreviousStep(),n=t.getNextStep();return e.isPopupStep(r)||e.isPopupStep(n)}}t.exports=r},function(t,e){function r(t,e,r,n,a,i,o){var s=this;s.storeStateInCookie=c,s.getPersistenceData=d,s.getRunningWalkthruId=S;var u=t.WALKTHRU_PERSISTANCE_DATA_FIELDS;function l(){}function c(){var r=void 0,n=void 0,o=void 0,s=void 0,u=a.getCurrentWalkthru(),l=u?u.TutorialId:-1,c=u?u.userGuid:_walkmeInternals.ctx.get("UserGuidContainer").getUserGuid(),d=e.getCurrentInteractionGuid();a.state==t.WALKTHRU_STATE.RUNNING||a.state==t.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE?(r=a.currentStep+1,u.Steps.length<=a.currentStep+1&&(n=1)):a.state==t.WALKTHRU_STATE.WAITING_FOR_SPLIT?(r=a.currentStep,o=i.splitTutorialIds,s=i.splitStartFromStepId):r=a.currentStep;var S=p(l,r,n,o,s,d),g=_walkmeInternals.ctx.get("ClientStorageManager"),T=g.keysConfig.walkthru.persistenceData;g.saveData(T.key,S,T.expiry,c)}function p(t,e,r,n,i,s){var l={};return l[u.CURRENT_TUTORIAL_COOKIE_NAME]=t,l[u.CURRENT_STATE_COOKIE_NAME]=a.state,l[u.CURRENT_STEP_COOKIE_NAME]=e,l[u.CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME]=a.stepAppearanceIndex,l[u.CURRENT_PLAY_GUID_COOKIE_NAME]=_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID,l[u.CURRENT_PLAY_INITIATOR_COOKIE_NAME]=_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator,l[u.SPLIT_POINT_COOKIE_NAME]=a.splitPointStack,l[u.TUTORIAL_FINISHED_COOKIE_NAME]=r,l[u.STEP_PLAY_HISTORY_COOKIE_NAME]=a.stepPlayHistory,l[u.SPLIT_TUTORIAL_IDS_COOKIE_NAME]=n,l[u.SPLIT_START_FROM_STEP_COOKIE_NAME]=i,l[u.INTERACTION_GUID_COOKIE_NAME]=s,window._testMe&&(l[u.STEP_COMPLETED_HISTORY_COOKIE_NAME]=a.stepCompletedHistory),o.raiseEvent("SavingPersistenceData",l),l}function d(e){var i=T(e),s=g(i,-1),l={state:n.getInt(i[u.CURRENT_STATE_COOKIE_NAME],t.WALKTHRU_STATE.NOT_RUNNING),step:n.getInt(i[u.CURRENT_STEP_COOKIE_NAME],-1),playNum:i[u.CURRENT_STEP_PLAY_NUMBER_COOKIE_NAME]||a.stepAppearanceIndex,tutotrialGUID:i[u.CURRENT_PLAY_GUID_COOKIE_NAME],playInitiator:i[u.CURRENT_PLAY_INITIATOR_COOKIE_NAME],splitPointStack:n.defaultValue(i[u.SPLIT_POINT_COOKIE_NAME],[]),isTutorialFinished:n.defaultValue(i[u.TUTORIAL_FINISHED_COOKIE_NAME],0),stepPlayHistory:n.defaultValue(i[u.STEP_PLAY_HISTORY_COOKIE_NAME],[]),stepCompletedHistory:n.defaultValue(i[u.STEP_COMPLETED_HISTORY_COOKIE_NAME],[]),tutorial:r.getWalkthruIndexByWalkthruId(s),splitTutorialIds:n.defaultValue(i[u.SPLIT_TUTORIAL_IDS_COOKIE_NAME],[]),splitStartFromStepId:n.defaultValue(i[u.SPLIT_START_FROM_STEP_COOKIE_NAME],[]),interactionGuid:i[u.INTERACTION_GUID_COOKIE_NAME]};return o.raiseEvent("GettingPersistenceData",{persistenceData:i,current:l}),l}function S(t){return g(T(t))}function g(t,e){return n.getInt(t[u.CURRENT_TUTORIAL_COOKIE_NAME],e)}function T(e){return _walkmeInternals.ctx.get("ClientStorageManager").getData(t.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,{},e)}l()}t.exports=r},function(t,e){function r(t,e,r,n,a,i,o,s,u,l,c,p,d,S,g){var T=this;T.restore=I,T.restoreCrossUsersState=I,T.restoreStateFromCookie=h;function f(){}function I(t){o.customerLog("Restoring cross user state",5);var e=g.getAllUserGuids();if(!e.length)return t&&t(),!1;for(var r=0;r<e.length;r++){var n=e[r],a=h(n,t);if(a)return n}return!1}function h(g,T){var f=l.getRunningWalkthruId(g);f?t.afterStepsLoaded(f,I):I();function I(){var t=E(g);r.stepAppearanceIndex=t.playNum,r.splitPointStack=t.splitPointStack,r.stepPlayHistory=t.stepPlayHistory,r.currentWalkthru=t.tutorial,r.currentStep=t.step,r.stepCompletedHistory=t.stepCompletedHistory,r.state=t.state,u.raiseEvent("RestoringStateFromCookie",t),n.setCurrentInteractionGuid(t.interactionGuid),t.tutotrialGUID&&(_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID=t.tutotrialGUID),_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator=t.playInitiator;var l=e.getStepByIndex(r.currentWalkthru,r.currentStep);function f(){a.playSetTimeout(function(){i.executeCurrentStep()},1e3*l.Delay)}if(r.state==p.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE||r.state==p.WALKTHRU_STATE.PASSING_OWNERSHIP&&l){r.currentStep--;var I=e.getStepByIndex(r.currentWalkthru,r.currentStep);I&&(I.playNumber=r.stepAppearanceIndex),i.stepWasCompleted(!0),r.currentStep++}if(o.customerLog("isTutorialFinished: "+t.isTutorialFinished,5),1!=t.isTutorialFinished||r.state!=p.WALKTHRU_STATE.RUNNING&&r.state!=p.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&r.state!=p.WALKTHRU_STATE.PASSING_OWNERSHIP)if(o.customerLog("Continue from cookie: currentTutorial: "+r.currentWalkthru+" -- currentState: "+r.state+" -- currentStep: "+r.currentStep+" -- currentPlayGUID: "+_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID+" -- currentUserGUID: "+g,5),!l||r.state!=p.WALKTHRU_STATE.RUNNING&&r.state!=p.WALKTHRU_STATE.WAITING_FOR_ELEMENT&&r.state!=p.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT&&r.state!=p.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE&&r.state!=p.WALKTHRU_STATE.WAITING_FOR_CONDITION&&r.state!=p.WALKTHRU_STATE.PASSING_OWNERSHIP)if(l&&r.state==p.WALKTHRU_STATE.WAITING_FOR_REDIRECT)i.loadTutorial(r.currentWalkthru,0,!1,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator);else if(l&&r.state==p.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP)i.startNewTutorial(r.currentWalkthru,r.currentStep,!1,_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator);else if(!l||r.state!=p.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT&&r.state!=p.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK)if(r.state==p.WALKTHRU_STATE.WAITING_FOR_SPLIT)d.splitTutorialIds=t.splitTutorialIds,d.splitStartFromStepId=t.splitStartFromStepId,c.resumeSplit();else{if(r.state!=p.WALKTHRU_STATE.PAUSED)return i.resetState(),o.customerLog("Invalid cookie data. Not running tutorial. (userGuid : "+g+")",5),T&&T(!1),!1;o.customerLog("Tutorial was paused while restoring state from cookie. This can happen for several reasons when SPA is configured: A trigger for a balloon or wait for conditions has not been fullfilled. Alterntively an autostart is defined with sonar on an element that causes SPA page change. Please define the autostart without sonar.",1),S.releaseBalloons(),i.releaseBalloonsTimeouts(),i.resetState(),u.raiseEvent("WalkthruAborted")}else s.getSettingsValue(l.Settings,"sticky",0)?(o.customerLog("Sticky - keep looking for element",5),r.state=p.WALKTHRU_STATE.WAITING_FOR_STICKY_ELEMENT,f()):l.IsSkippable&&(r.getCurrentWalkthru().Steps.length==r.currentStep+1?i.tutorialFinished():(r.currentStep++,r.state=p.WALKTHRU_STATE.RUNNING,f()));else f();else i.tutorialFinished(!0);return T&&T(!0),!0}}function E(t){var r=l.getPersistenceData(t),n=e.getStepByIndex(r.tutorial,r.step);return n&&(r.isTutorialFinished||r.state!=p.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT&&r.state!=p.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK||s.getSettingsValue(n.Settings,"sticky",0)||n.IsSkippable||(o.customerLog("page change happened while waiting for element - pausing walkthru",2),r.state=p.WALKTHRU_STATE.PAUSED)),r}f()}t.exports=r},function(t,e,r){(function(e){function r(t,r,n,a,i,o,s,u,l){var c=this;c.LoadStepsForWT=S,c.afterStepsLoaded=d;var p={};function d(t,e){if(p[t])return p[t].then(e,e);var r=l.getWalkthrus(),n=k(t);return r[n]&&0==r[n].Steps.length?(p[t]=T(n,t).then(e,e),!0):e()}function S(t){return c.afterStepsLoaded(t,function(){})}function g(t,e){var r="data_"+t+"_wt_"+e,n=s.getCurrentLanguage();return n&&(r+="_"+n),r+".js"}function T(n,a){var i=t.getPublishDirectory(),s=t.getPublishVersion(),u=i+g(s,a);return o.customerLog("Retriving steps for Walkthtu: "+a,3),new e(function(t,e){r.execute({url:u,dataType:"jsonp",cache:!0,jsonpCallback:"walkme_steps_"+a,success:function(e){E(n,e),f(e,t)},error:function(t){o.customerLog("Error: unable to receive data for Walkthtu: "+a,3),e(t)}})})}function f(t,e){for(var r=[],n=0;n<t.length;n++){var o=t[n];if(i.isBranchStep(o)){var s=o.Settings.action.arguments.wtId;r.push(I(s))}r=r.concat(h(o))}a.executeParallel({functionsToExecute:r,successCallback:e})}function I(t){return function(e){p[t]?e():c.afterStepsLoaded(t,e)}}function h(t){var e=[];if(t.LinkedTutorialIds)for(var r=t.LinkedTutorialIds.split(";"),n=0;n<r.length;n++)r[n]&&e.push(I(r[n]));return e}function E(t,e){var r=l.getWalkthrus();r[t].Steps=e,n.fixSteps(r[t],u.get())}function k(t){for(var e=l.getWalkthrus(),r=0;r<e.length;r++)if(e[r].TutorialId==t)return r;return-1}}t.exports=r}).call(e,r(29))},function(t,e){function r(t,e,r,n,a,i,o,s,u,l,c,p,d){var S=this;S.makeSplit=T,S.resumeSplit=h;function g(){}function T(t,e,n,a,i){u.state=s.WALKTHRU_STATE.WAITING_FOR_SPLIT,1!=n&&f(e),p.splitTutorialIds=t,p.splitStartFromStepId=a,l.storeStateInCookie(),r.stepWasCompleted(),h(i)}function f(t){I()||u.splitPointStack.push({tutorialIndex:u.currentWalkthru,stepIndex:void 0!=t?t:u.currentStep+1,playGuid:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayGUID,playInitiator:_walkmeInternals.ctx.get("AuditStepsManager")._currentPlayInitiator,stepPlayHistory:u.stepPlayHistory,stepCompletedHistory:u.stepCompletedHistory,stepPlayStack:u.stepPlayStack})}function I(){return u.getCurrentWalkthru().Steps.length<=u.currentStep+1}function h(a){_walkmeInternals.ctx.get("ElementFinder").wrapSession(function(){try{var c=1e3;a=a||c;var S,g,T=0;if(1==p.splitTutorialIds.length){if(g=p.splitTutorialIds[0],void 0!=p.splitStartFromStepId){var f=e.getStepIndex(p.splitStartFromStepId,g);f!=-1&&(T=f),t.customerLog(d.formatString("Resuming split, walkthru id: {0}, step index: {1}",g,T))}}else g=k(p.splitTutorialIds);g?(o.deprecatedRaiseEvent("switchToWalkthru",g),S=n.getWalkthruIndexByWalkthruId(g),i.playSetTimeout(function(){var t={type:s.STEP_PLAY_INITIATOR_ENUM.BRANCHING,objectId:u.getCurrentStep().Id,appType:s.EVENT_SENDER_EVENT_APPS.Step};r.loadTutorial(S,T,!1,void 0,t)},a),l.storeStateInCookie()):(t.customerLog("Try again in "+c+"ms."),i.playSetTimeout(function(){h()},c))}catch(I){t.error(I)}})}function E(e){var r=c.map(e,function(e){var r=v(e.TutorialId);t.customerLog("Check walk-thru: "+e.TutorialId+" ("+r+")");var n=a.findElement(e);return n?t.customerLog("First step found."):t.customerLog("First step not found."),{step:e,element:n}});return r=c.filter(r,function(t){return t.element}),c.map(r,function(t){return t.step})}function k(e){try{t.customerLog("Multiple branch: Going through all walk-thrus.");var r=_(e),n=E(r);if(1==n.length)return n[0].TutorialId;if(!(n.length>1))return null;t.customerLog("can't decide which tutorial to play",5),t.customerLog(n.length+" walk-thrus match. Cannot choose which walk-thru to start.")}catch(a){t.error(a)}}function v(t){var e=n.getWalkthruById(t);return e?e.Name:""}function _(t){var e=c.map(t,function(t){return n.getWalkthruById(t).Steps[0]});return e}g()}t.exports=r},function(t,e){function r(t,e,r,n,a,i,o,s){var u=this;u.getWalkthrus=c,u.getWalkthrusLabels=p,u.startWalkthruById=d,u.startWalkthruByIndex=S,u.canStartWalkthru=g,u.setWalkthruVisibility=T,u.stopWalkthru=f;var l=s.wrapCustomerLog("walkmeAPI");function c(e){try{for(var r=t.getWalkthrus(),n=new Array,a=0;a<r.length;a++){var i=r[a].CustomField1;i&&(i=i.replace(/&quot;/gi,'"'),i=i.replace(/&apos;/gi,"'"),i=i.replace(/&#39;/gi,"'"),i=i.replace(/&amp;/gi,"&"));var o={Index:a,Name:r[a].Name,Id:r[a].TutorialId,Visible:r[a].IsVisible,CustomField1:i,Description:r[a].Description,Keywords:r[a].Keywords};e&&(o.ConditionsPassed=_walkMe.canShowTutorial(r[a]),o.isPackageHidden=_walkMe.isTutorialPackageHidden(r[a]),void 0==r[a].Keywords?o.Keywords=[]:o.Keywords=r[a].Keywords),n.push(o)}return n}catch(s){l("walkMeAPI - error running getWalkthrus.",3)}}function p(t){try{var r=E();if(null==r)return null;for(var n=this.getWalkthrus(t),a=k(r,n),i=e.get(),o=[],s=0;s<r.length;s++){var u={Name:r[s].Name,Id:r[s].Id,Walkthrus:v(n,r[s].LinkedTutorials,r[s].Id)};o.push(u)}return{unlabeledWalkthrus:a,labels:o,unlabeledFirst:i.Settings.labels&&1==i.Settings.labels.unlabeldOnTop}}catch(c){l("walkMeAPI - error running getWalkthrusLabels.",3)}}function d(t,e){try{"object"!=typeof t&&(t={id:t,fromStep:e});var n=t.id,a=t.fromStep,i=t.playInitiator;if(n<0||"number"!=typeof n)return!1;var o=I(n);if(o<0)return!1;return i||(i={type:r.STEP_PLAY_INITIATOR_ENUM.API}),u.startWalkthruByIndex({index:o,fromStep:a,playInitiator:i})}catch(s){l("walkMeAPI - error running startWalkthruById.",3)}}function S(t,e){try{if(!n.isWalkMeVisible())return!1;"object"!=typeof t&&(t={index:t,fromStep:e});var a=t.index,i=t.fromStep,o=t.playInitiator;if(a<0||"number"!=typeof a)return!1;return o||(o={type:r.STEP_PLAY_INITIATOR_ENUM.API}),h(o),_walkMe.startNewTutorial(a,i,!1,o)}catch(s){l("walkMeAPI - error running startWalkthruByIndex.",3)}}function g(t,e){try{if(!n.isWalkMeVisible())return!1;if(t<0||"number"!=typeof t)return!1;var r=I(t);if(r<0)return!1;return _walkMe.startNewTutorial(r,e,!0)}catch(a){l("walkMeAPI - error running canStartWalkthru.",3)}}function T(e,r){try{var n=t.getWalkthrus(),a=I(e);if(a<0)return!1;return n[a].IsVisible=r,!0}catch(i){l("walkMeAPI - error running setWalkthruVisibility.",3)}}function f(){try{_walkMe.stopTutorial()}catch(t){l("walkMeAPI - error running stopWalkthru.",3)}}function I(e){for(var r=t.getWalkthrus(),n=0;n<r.length;n++)if(r[n].TutorialId==e)return n;return-1}function h(t){a.raiseEvent(r.EVENTS.ApiWasCalled,{initiator:t})}function E(){var t=i.getSettingsValue(e.get().Settings,"labels",null);if(t&&1==t.useLabels)return o.get();return null}function k(t,e){for(var r=[],n=0;n<t.length;n++)for(var a=t[n].LinkedTutorials,i=0;i<a.length;i++)r.push(a[i]);for(var o=[],n=0;n<e.length;n++)_(e[n].Id,r)||o.push(e[n]);return o}function v(t,e,r){for(var n=[],a=0;a<t.length;a++)if(_(t[a].Id,e)){var i=mtjQuery.extend(!0,{},t[a]);i.labelId=r,n.push(i)}return n}function _(t,e){for(var r=0;r<e.length;r++)if(e[r]==t)return!0;return!1}}t.exports=r},function(t,e){function r(t,e,r,n,a){var i=this;i.setTutorials=t.setTutorials,i.isTutorialPackageHidden=t.isTutorialPackageHidden,i.canShowTutorial=t.canShowTutorial,i.stopTutorial=t.stopTutorial,i.startNewTutorial=t.startNewTutorial,i.tutorialFinished=t.tutorialFinished,i.executeTutorialNextStep=t.executeTutorialNextStep,i.postWelcomeStep=t.postWelcomeStep,i.executeCurrentStep=t.executeCurrentStep,i.getCurrentTutorial=e.getCurrentWalkthru,i.getTutorials=r.getWalkthrus,i.setTutorialsForEditor=o,i.getState=s,i.forceSplit=u,i.runTutorialsActionConditions={};function o(e,r){try{for(var n=_walkmeInternals.ctx.get("StaticUtils").secureEvalJSON(e),i=0;i<n.length;i++)n[i].userGuid=r;t.setTutorials(n)}catch(o){a.error(o)}}function s(){return e.state}function u(){n.makeSplit.apply(null,arguments)}}t.exports=r},function(t,e){function r(){var t=this;t.splitTutorialIds=[],t.splitStartFromStepId;function e(){}e()}t.exports=r},function(t,e){function r(t,e,r,n,a,i,o,s,u){var l=this;l.addButtonEventsToBalloon=c,l.attachBalloonXButtonClickEvent=d;function c(t,e){p(t),d(t),u.addButtonEventsToBalloon(t,e)}function p(t){mtjQuery(".walkme-action-next, .walkme-action-start",t).click(function(t){f()}),mtjQuery(".walkme-action-back",t).click(function(t){g()}),mtjQuery(".walkme-action-done",t).click(function(t){I()})}function d(t){mtjQuery(".walkme-action-close, .walkme-action-cancel",t).click(function(t){S(t)})}function S(a){var i={ClickEvent:a};n.raiseEvent("UserStoppedWalkthru",i);var o=t.currentStep==-1;o||_walkmeInternals.ctx.get("AuditStepsManager").auditStep(t.getCurrentWalkthru(),t.getCurrentStep(),e.STEP_STATUS.Exited),r.stopTutorial(o),n.raiseEvent("UserStoppedWalkthruAfterStop",i)}function g(){n.raiseEvent("BackButtonClicked");var e=t.getCurrentStep();h(e),t.stepPlayStack.pop(),T()&&r.executePreviousStep()}function T(){if(s.isFeatureEnabled("backButtonAlways"))return!0;return!E(t.lastBackButtonStepIndex-1)}function f(){n.raiseEvent("NextButtonClicked");var a=t.getCurrentStep();n.deprecatedRaiseEvent(e.EVENTS.Walkthrus.StepTriggered,a),h(a);var i=E();i||(t.state=e.WALKTHRU_STATE.RUNNING,o.releaseBalloons(function(){k(a)||(r.stepWasCompleted(),r.executeTutorialNextStep())}))}function I(){n.raiseEvent("DoneButtonClicked");var a=t.getCurrentStep();if(n.deprecatedRaiseEvent(e.EVENTS.Walkthrus.StepTriggered,a),h(a),!k(a)){var i=E();i||(r.stepWasCompleted(),r.tutorialFinished())}}function h(t){t.durationHandler&&(t.durationHandler.clear(),t.durationHandler=null)}function E(t){for(var e,r=i.getAll(),n=0;n<r.length;n++)r[n].releaseEvents(t)&&(e=!0);return e}function k(t){return!(t.Type!=e.STEP_TYPE.Popup||!t.LinkedTutorialIds||!r.isTutorialIdsExist(t.LinkedTutorialIds.split(";")))&&(a.makeSplit(t.LinkedTutorialIds.split(";")),!0)}}t.exports=r},function(t,e){function r(t,e,r,n,a,i,o,s,u,l,c){var p=this;p.showFailPopup=f,p.closePopup=T;var d,S,g="display: block; padding: 0; margin: 0;\tvertical-align: baseline; border-collapse: inherit; background: none; border-spacing: 1px 1px; line-height: normal; border: none none; height: auto; text-indent: inherit;  font-family: Arial; letter-spacing: normal; text-align: left; text-transform: none; font-weight: normal; outline: invert none medium; width: auto;  border-top: none; border-right: none; border-bottom: none; border-left: none; direction: ltr; position: static; top: auto; left: auto;";function T(t){S&&S.clear(),u.shouldKeepOverlay()||r.removeOverlay(),r.destroyDivWithIframes(d,t),d=null}function f(t,e,r,n){n+="<div style='float: right'>",n+=h(t,"walkme-custom-first-step-not-available-ok-button mt-custom-first-step-not-available-ok-button CUSTOM-TUTORIAL-ID","OK",e),n+="</div>",I(t,e,"first-step-not-available",n,420,r.Id,E)}function I(i,u,p,T,f,I,h){var E='<div class="mt-to-destroy walkme-custom-popup mt-custom-popup walkme-custom-popup-'+p+" mt-custom-popup-"+p+' CUSTOM-TUTORIAL-ID mt-to-destroy" id="walkme-popup-body" style="CSS-RESET width:'+f+'px">'+T+"</div>";E=E.replace(/CSS-RESET/g,g),E=E.replace(/CUSTOM-TUTORIAL-ID/g,"walkme-custom-walkthru-"+I);var k=s.getTopContainer();k.append(E),d=mtjQuery("#walkme-popup-body",k),d.css({position:"fixed","z-index":e.POPUP_BALLOON_Z_INDEX,padding:"8px 12px 12px 12px","font-family":"Arial"}),t.setStyleForBalloon(d,u,!1);var v=0;mtjQuery.each(mtjQuery("[width], [style*=width]",d),function(t,e){mtjQuery(e).width()>v&&(v=mtjQuery(e).width())}),d.width()<v&&d.css("width",v+"px"),a.centerElementInPage(d,!1),S=n.playSetInterval(function(){a.centerElementInPage(d,!0)},1e3),l.isQuirksMode()||c.shouldHandlePageAsFramesets()||r.displayOverlay(2147483630,!0),d.fadeIn("slow"),o.addButtonEventsToBalloon(d,{objectId:I,type:e.STEP_PLAY_INITIATOR_ENUM.WALKTHRU}),h&&h(d)}function h(e,r,n,a){a=t.fixConfiguration(a),a.ButtonBorderColor=a.ButtonBorderColor||"#6c84a6";var o="rtl"==e.Direction?"right":"left";t.fixGradientColorsInConfiguration(a,"ButtonBgColor"),t.fixGradientColorsInConfiguration(a,"ButtonBgColor2");var s=a.ButtonBgColor,u=a.ButtonBgColor2,c=a.ButtonShadowWidth,p=a.BalloonButtonRadius,d=s!=u,S="CSS-RESET "+(d?"background:-moz-linear-gradient(top, "+s+", "+u+");background:-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+s+"), color-stop(100%,"+u+"));background:-webkit-linear-gradient(top, "+s+" 0%,"+u+" 100%);background:-o-linear-gradient(top, "+s+" 0%,"+u+" 100%);background:-ms-linear-gradient(top, "+s+" 0%,"+u+" 100%);background:linear-gradient(to bottom, "+s+" 0%,"+u+' 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr="'+s+'", endColorstr="'+u+'",GradientType=0 );':"background-color:"+s+";")+"border: 1px solid "+a.ButtonBorderColor+";color:"+a.ButtonTextColor+"; cursor: pointer; display: inline-block; float: none; font-size: 14px; font-weight: normal;font-family: Arial; margin-"+o+": 6px; padding: 2px 14px; text-align: center; text-decoration: none; position: static;overflow: visible;-moz-box-shadow: 0 0 "+c+"px rgba(0, 0, 0, 0.4);-webkit-box-shadow: 0 0 "+c+"px rgba(0, 0, 0, 0.4); box-shadow: 0 0 "+c+"px rgba(0, 0, 0, 0.4); -moz-border-radius:"+p+"px;-webkit-border-radius:"+p+"px;border-radius:"+p+"px;";return s!=u&&l.isIE()&&(S+="border-radius: 0px;"),d&&CommonUtils.isGradientUsingFilter(S)&&(S+="background: url("+i.get()+"/player/resources/images/spacer.gif) repeat;"),S=S.replace(/CSS-RESET/g,g),"<button class='"+r+"' type='button' style='"+S+"'>"+n+"</button>"}function E(t){mtjQuery(".walkme-custom-first-step-not-available-ok-button",t).click(function(){T()})}}t.exports=r},function(t,e){function r(t,e){var r=this;r.showFailedToStartPopup=n;function n(r,n,i){if(a(r))return t.showFailedToStartPopup(r,n,i.Settings.bbcode_v);var o=r.BalloonSettings,s={balloonSettings:o,alertText:n,isOldBalloon:!0,bbCodeVersion:i.Settings.bbcode_v},u=t.createHtmlForNotAvailablePopup(s);e.showFailPopup(r,o,i,u)}function a(t){return"v3"==t.BalloonSettings.BalloonVersion||"vm1"==t.BalloonSettings.BalloonVersion}}t.exports=r},function(t,e){function r(t){var e=this;e.isActionStep=r,e.isBranchStep=n,e.isPopupStep=a,e.isSpotlightStep=i;function r(e){return e.Type&&e.Type==t.STEP_TYPE.Action}function n(e){return e.Type&&e.Type==t.STEP_TYPE.Action&&e.Settings&&e.Settings.action&&e.Settings.action.actionType==t.STEP_ACTION.Branch}function a(e){return e&&e.Type&&e.Type==t.STEP_TYPE.Popup}function i(t){return t&&t.Settings&&(1==t.Settings.fadeBackground||"True"==t.Settings.fadeBackground||1==t.Settings.fadeBackground)}}t.exports=r},function(t,e){function r(t,e,r){var n=this;n.activateSurvey=a;function a(n,a,i,o,s,u,l){var c=r.walkthruSurveyActivator.surveyRepeat.key+n.TutorialId,p={tutorialId:n.Id,eventSource:a,callback:u,stepIndex:l,lastStepIndex:n.Steps.length-1,surveyPlayGUID:e._currentPlayGUID};t.activateSurvey(o,c,s,i,p)}}t.exports=r},function(t,e){function r(t,e,r,n,a,i){var o=this;o.auditSafeStartStatus=s,o.redirect=l,o.auditStayButtonClicked=u,o.auditSafeStartDisabled=p,o.auditSafeStartFirstStatus=d;function s(t,r){var n=r.wt;void 0!=n.Id&&e.safeStartAudit(t,n)}function u(e){s(t.SAFESTART_ACTION.StayClicked,e)}function l(e,i){n.currentStep=0,n.state=t.WALKTHRU_STATE.WAITING_FOR_REDIRECT,n.currentWalkthru=i.tutorialIndex,a.storeStateInCookie(),r.redirect(e)}function c(t){for(var r=0;r<t.checkStepExistsTrace.length;r++)e.auditStep(t.wt,t.wt.Steps[t.checkStepExistsTrace[r].stepIndex],t.checkStepExistsTrace[r].stepStatus,!1)}function p(r){var n={tutorialId:r.wt.TutorialId,tutorialName:r.wt.Name,playGuid:e._currentPlayGUID,playInitiator:e._currentPlayInitiator,status:t.SAFESTART_ACTION.ErrorShown};i.send(n)}function d(t,e){s(t,e),c(e)}}t.exports=r},function(t,e){function r(t,e,r){var n=this;n.migrateSiteConfigData=a;function a(n){for(var a=t.getWalkthrus(),i={},o=0;o<a.length;o++)r.fixSteps(a[o],n),i[a[o].TutorialId]={siteConfig:n,isPackageHidden:_walkmeInternals.ctx.get("LibInitializer").isNextDataPackageIsHidden()};e.setMember("tutorialRunSettingsMap",i)}}t.exports=r},function(t,e){function r(t,e,r,n,a,i){var o=this;o.register=s,o.append=u;function s(){n.registerDataAppender(o)}function u(t,n){a.isNewLanguage()&&c(),l(n[r.Tutorial]),e.migrateSiteConfigData(t.SiteConfig)}function l(e){var r=t.getWalkthrus();r=r.concat(e),t.setWalkthrus(r),a.isNewLanguage()&&i.setDeployables(t.getWalkthrus())}function c(){t.setWalkthrus([])}}t.exports=r},function(t,e){function r(t,e,r,n,a,i){var o=this;o.register=s,o.convert=u;function s(){i.registerConverter(o)}function u(i,o){for(var s=r.get(0),u=s.getAll(),l={},c=0;c<u.length;c++)for(var p=u[c].Steps,d=0;d<p.length;d++){var S=p[d];if(e.isActionStep(S)){var g=n.getSettingsValue(S.Settings,"action",null);if(g&&"setWalkMeData"==g.actionType){var T=g.arguments,f=T.dataKey;if(i[f]){var I=T.dataDuration;if(I>=t.ONE_DAY_SECONDS)if(l[f])I>l[f].Expiry&&(l[f].Expiry=I);else{var h=i[f];if(void 0!==h){var E={Value:h,Expiry:I};l[f]=E}}}}}}for(var f in l)l.hasOwnProperty(f)&&a.saveData(f,l[f].Value,parseInt(l[f].Expiry),o)}}t.exports=r},function(t,e){function r(t,e,r,n,a){var i=this;i.init=o;function o(){n.on(a.EVENTS.CallReleaseElementsFromBalloons,s)}function s(n,a){if(a.isDuringLanguageChange)return void t.stopTutorial(void 0,!0,!0);a.isDestroyingAll&&(t.setMember("tutorialRunSettingsMap",{}),t.setMember("executeTutorialNextStepNotFinished",!1)),r.closePopup(),e.releaseAllEventBindings(),t.cleanCurrentStepResources()}}t.exports=r},function(t,e){function r(t,e){var r=this;r.register=a,r.bindEvents=i;var n;function a(){e.register(r)}function i(){_walkmeInternals.bind("NewStepShown",o),_walkmeInternals.bind("StepCompleted",s),_walkmeInternals.bind("TutorialStopped",s)}function o(e,r,a){if(t.isPopupStep(r)){n=document.activeElement;var i=a.Balloon.find(".walkme-custom-balloon-title");i.focus()}}function s(e,r){t.isPopupStep(r)&&n&&(n.focus(),n=null)}}t.exports=r},function(t,e){function r(t){var e=this;e.append=r;function r(e){var r=t.getCurrentWalkthru();if(r){e.WalkthruId=r.TutorialId;var n=t.getCurrentStep();n&&(e.StepIndex=n.StepIndex)}}}t.exports=r},function(t,e){function r(t,e){var r=this;r.init=n;function n(){wmjQuery.each(t.get(),function(t,r){r.addAppender(e)})}}t.exports=r},function(t,e){function r(t,e,r,n){var a=this;a.handle=i;function i(a,i){if(e.isInPlayMode()){var o=a.Steps[i],s={step:o,tutorial:a};t.raiseEvent("WalkthruFailedToStart",s)}else{var u=n.getSiteConfigByTutorialId(a.Id),l=r.getSettingsValue(a.Settings,"cantPlayAlert",u.TutorialCantPlayText);_walkmeInternals.ctx.get("WalkthruPopupNotificationsService").showFailedToStartPopup(u,l,a)}}}t.exports=r},function(t,e){function r(t,e,r,n,a,i,o,s,u,l,c,p,d,S,g,T,f,I,h,E){var k=this;k.register=A;var v={playWt:m,redirect:C,refresh:w,branchWt:W,stopWt:y,playStep:N,openPlayerMenu:P,waitForCond:x,delay:R,passOwnership:L,setWalkMeData:O},_="superstep";function A(){t.addActions(v)}function m(t,e,r){this.isValid=function(){return!0},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){h.afterStepsLoaded(t.wtId,a)};function a(){try{var n=t.playWtFromBeginning?0:s.getStepIndex(t.StepId,t.wtId);if(n==-1){var a=E.formatString("Step with id: {0} was not found in walkthru with id {1}",t.StepId,t.wtId);T.customerLog(a)}else WalkMeAPI.startWalkthruById({id:parseInt(t.wtId),fromStep:n,playInitiator:{type:e,objectId:r.Id}})}catch(i){var o="Failed starting walkthru with id {0}, starting from step {1}. Exception is: {2}",a=E.formatString(o,t.wtId,t.StepId,E.toJSON(i));T.customerLog(a)}}}function C(t){this.isValid=function(){return!0},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){p.stepWasCompleted();var e=t.redirectUrl,r=o.redirect(e);r||(p.stepWasCompleted(),p.executeTutorialNextStep())}}function W(t,e,r){this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return a(t.wtId)},this.doAction=function(){var e,n=t.wtId;1==t.returnToWt?(e=s.getStepIndex(t.StepId,r.TutorialId),d.makeSplit([n],e,!1,t.startingStepId)):d.makeSplit([n],e,!0,t.startingStepId)},this.getGoToData=function(){var e=u.getWalkthruIndexByWalkthruId(t.wtId);
return{tutorialIndex:e,stepIndex:0}};function a(t){return!!u.getWalkthruById(t)}}function y(t){this.type="stopWt",this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){p.stepWasCompleted(),e.stopTutorial()}}function N(t,e,r){this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return a(t.StepId,r.TutorialId)},this.doAction=function(){var e=t.StepId,a=s.getStepIndex(e,r.TutorialId);p.stepWasCompleted(),l.currentStep<a&&p.fillMissingStepAudits(l.currentWalkthru,l.currentStep+1,a,n.STEP_STATUS.SkippedByActionStep),l.currentStep=a,p.executeCurrentStep()},this.getGoToData=function(){var e=t.StepId,n=s.getStepIndex(e,r.TutorialId),a=u.getWalkthruIndexByWalkthruId(r.TutorialId);return{tutorialIndex:a,stepIndex:n}};function a(t,e){return s.getStepIndex(t,e)!=-1}}function P(e,r,a){this.isValid=function(){return void 0!=window.WalkMePlayerAPI},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.doAction=function(){try{p.stepWasCompleted(),t.get("openMenu",e,r,a).doAction()}catch(n){T.error(n,"Failed opening player menu")}p.executeTutorialNextStep()}}function x(t){this.Type=n.DEPLOYABLE_ACTION_TYPES.Action,this.isValid=function(){return!0},this.doAction=function(){l.state=n.WALKTHRU_STATE.WAITING_FOR_CONDITION,c.storeStateInCookie();var e=l.getCurrentStep(),r={evaluationPollingIntervalMs:500,featureName:_,elementName:"Wait for condition step: "+e.StepTitle},a=f.createOld(r),o=t.condition;a.onValueChanged(function(t){S.isDebuggerOnWindow()&&i.deprecatedRaiseEvent(n.EVENTS.ActionConditionEvaluated,e),t&&(p.stepWasCompleted(),p.executeTutorialNextStep())}),a.evaluateAsync(o),p.addCurrentStepResource(a)}}function R(t){this.isValid=function(){return!0},this.doAction=function(){return c.storeStateInCookie(),g.playSetTimeout(function(){p.stepWasCompleted(),p.executeTutorialNextStep()},1e3*t.duration),!0},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function w(){this.isValid=function(){return!0},this.doAction=function(){p.stepWasCompleted(),c.storeStateInCookie(),g.libSetTimeout(function(){location.reload(!0)},200)},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}function L(t,e,r){this.isValid=function(){return!0},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action;var i={stepId:r.Id,tutorialId:r.TutorialId};this.doAction=function(){var t=a.keysConfig.passOwnership.newWindowTime;if(a.saveData(t.key,(new Date).getTime(),t.expiry),!I.get().enabled())return T.customerLog("Reached pass ownership step but the feature is not supported, the next step will not be executed."),void p.tutorialFinished();I.get().determineOwnership(i)}}function O(t){this.isValid=function(){return!0},this.doAction=function(){var e=Math.min(t.dataDuration,n.COOKIE_LIFE_2_YEARS);r.saveData(t.dataKey,t.dataValue,e),p.stepWasCompleted(),p.executeTutorialNextStep()},this.Type=n.DEPLOYABLE_ACTION_TYPES.Action}}t.exports=r},function(t,e){function r(t,e,r){var n=this;n.redirect=i,n.canRedirect=o,n.clearRedirectTimer=s;var a;function i(n,i){if(!t.canRedirect(n,i))return!1;return r.storeStateInCookie(),a=e.libSetTimeout(function(){t.redirect(n)},200),!t.isUrlDifferentFromCurrentOnlyInHash(n)}function o(e,r){return t.canRedirect(e,r)&&!t.isUrlDifferentFromCurrentOnlyInHash(e)}function s(){a&&a.clear()}}t.exports=r},function(t,e){function r(t,e,r,n,a,i,o,s,u,l,c,p,d,S,g,T,f,I,h,E,k){var v=this;v.getDelay=P;var _=1e3,A=2e3,m=500,C=[],W=9,y=16;function N(){}v.handle=function(e,r,i,d,S){var g=p.getStep(i),T=!1,f=!!g.LinkedTutorialIds,E=[];if(f){var A=g.LinkedTutorialIds.split(";"),C=c.isTutorialIdsExist(A);C?(n.customerLog("This is a branched step. Branched walk-thru's: "+g.LinkedTutorialIds),E.push(M(e,["click","mousedown"],A,_))):(n.customerLog("Branch walk-thru id, not found: "+g.LinkedTutorialIds),f=!1)}var N=!1,P=!1,w=-1,L=c.getNextStepIncludingSplit(),U=null==L;c.isStepTrigger(g.End,u.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)&&(p.state=u.WALKTHRU_STATE.WAITING_FOR_NEXT_BUTTON_CLICK,U?P=!0:(L.IsSkippable||h.getSettingsValue(L.Settings,"skipNotExists",!1)||c.getPlayConditionMode(L)!=u.playConditionModes.STICKY_CONDITION&&!c.checkPlayStepCondition(L)||h.getSettingsValue(L.Settings,"fake",!1))&&c.checkIfStepExistsWithSkippables(L.TutorialIndex,L.StepIndex,void 0,void 0,void 0,u.CHECK_STEP_MODE.Normal)==-2?P=!0:N=!0);var D;if(c.isStepTrigger(g.End,u.WALKTHRU_STEP_TRIGGER.NOTHING))U||(T=!0);else if(c.isStepTrigger(g.End,u.WALKTHRU_STEP_TRIGGER.HOVER))D=["mouseenter"],E.push(R(e,r,D,U,m));else if(c.isStepTrigger(g.End,u.WALKTHRU_STEP_TRIGGER.CLICK)&&!f)D=l.get(),E.push(R(e,r,D,U,_));else if(c.isStepTrigger(g.End,u.WALKTHRU_STEP_TRIGGER.KEY_PRESSED)){var b=v.getDelay(r);D=["keydown","paste","change"];var B={};if(a.isFeatureEnabled("wmAccessibility")){function H(t){return t.which!=W&&t.which!=y}B.keydown=H}E.push(R(e,r,D,U,b,B))}else c.isStepTrigger(g.End,u.WALKTHRU_STEP_TRIGGER.PAGE_CHANGED)?(p.state=u.WALKTHRU_STATE.WAITING_FOR_PAGE_CHANGE,c.setMember("dontContinueTutorial",!0)):c.isStepTrigger(g.End,u.WALKTHRU_STEP_TRIGGER.DURATION)?g.durationHandler=t.playSetTimeout(function(){c.stepWasCompleted(),c.executeTutorialNextStep()},1e3*g.Duration):c.isStepTrigger(g.End,u.WALKTHRU_STEP_TRIGGER.SELECT_ANY)?x(e,r,U,E,!1):c.isStepTrigger(g.End,u.WALKTHRU_STEP_TRIGGER.SELECT_VALUE)?x(e,r,U,E,!0):c.isStepTrigger(g.End,u.WALKTHRU_STEP_TRIGGER.SWIPE)&&(D=["swipe"],E.push(R(e,r,D,U,m)));if(g.Settings.additionalTriggers){s.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepAdditionalTriggerSet,g);var G={elementName:r.StepTitle||r.StepText,evaluationPollingIntervalMs:500,onlyPollConditionFunctions:!0},F=I.createOld(G);F.onValueChanged(function(t){if(s.deprecatedRaiseEvent(u.EVENTS.Walkthrus.StepAdditionalTriggersInitialized,g),t){c.setMember("dontContinueTutorial",!1),g.durationHandler&&(g.durationHandler.clear(),g.durationHandler=null);var e=o.containsFuncName(g.Settings.additionalTriggers,["ElementClicked"]);O(U,_,e)}}),F.evaluateAsync(g.Settings.additionalTriggers),c.addCurrentStepResource(F)}return w=k.handleStepIndex(g,S,d),{executeNextStep:T,clearElementEventsFuncs:E,buttons:{nextButton:N,doneButton:P,backButtonStepIndex:w}}};function P(t){var e=i.get();return e.Settings.keyPressedNextStepDelay?e.Settings.keyPressedNextStepDelay:A}function x(t,e,r,n,a){function i(t){var r,n=e.Settings.complexHtml;return r="option"==t.target.tagName.toLowerCase()?t.target:t.target.options[t.target.selectedIndex],r.value==n.val||r.text==n.txt}var o=void 0;a&&(o=i);var s=["change"],u={change:o};n.push(R(t,e,s,r,_,u))}v.releaseAllEventBindings=function(){for(var t=0;t<C.length;t++)try{var e=C[t].element,r=C[t].eventName;T.unbind(e,r)}catch(n){}C.length=0};function R(t,e,r,a,i,o){p.state=u.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT;for(var s=function(t,e){n.customerLog("Step event triggered.");var o=wmjQuery.inArray("click",r)!==-1;return O(a,i,o,t,e),!0},l=w(s),c=0;c<r.length;c++){var d=o&&o[r[c]];function S(t){var e=function(e){if(t&&!t(e))return;l(e)};return e}var g=S(d);L(t,r[c]+".mt",g)}return function(t){return l(null,t)}}function w(t){var e=!1;function r(r,n){var a;return e||(a=t(r,n),e=!0),a}return r}function L(t,e,r){T.bind(t,e,r),C.push({element:t,eventName:e})}function O(r,n,a,i,o){g.releaseBalloons(),a&&(e.shouldHandlePageAsFramesets()&&e.checkIfAnyFrameIsUnloaded(n),null!=i&&E.setIgnoreNextBeforeUnload(U(mtjQuery(i.target)))),p.state=u.WALKTHRU_STATE.RUNNING,d.storeStateInCookie(),c.stepWasCompleted(void 0==o),void 0!=o&&(p.currentStep=o),r&&void 0==o?c.tutorialFinished():t.playSetTimeout(function(){c.executeTutorialNextStep()},n)}function U(t){if(f.isIE()){var e=!1;if("a"==t[0].nodeName.toLowerCase())e=t;else{var r=t.parents("a");r.length>0&&(e=mtjQuery(r[0]))}if(e&&e.attr("href")&&0==e.attr("href").indexOf("javascript:"))return!0}return!1}function M(t,e,r,a){p.state=u.WALKTHRU_STATE.WAITING_FOR_ELEMENT_EVENT,c.releaseEvents(t,e);for(var i=function(a){n.customerLog("Clicked the branched walk-thru."),c.releaseEvents(t,e),S.makeSplit(r)},o=w(i),s=w(function(){c.releaseEvents(t,e)}),l=0;l<e.length;l++)L(t,e[l]+".mt",o);return function(){return s()}}N.apply(null,arguments)}t.exports=r},function(t,e){function r(t,e,r,n){var a=this;a.handleStepIndex=i;function i(n,a,i){var s;if(n.StepIndex>0&&t.isStepTrigger(n.End,e.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)&&!o(a)){if(s=t.checkIfStepExistsWithSkippables(i,n.StepIndex-1,0,-1,void 0,e.CHECK_STEP_MODE.Normal),s>=0){var u=r.getStep(s);t.isStepTrigger(u.End,e.WALKTHRU_STEP_TRIGGER.NEXT_BUTTON)||(s=-1)}r.lastBackButtonStepIndex=s}return s}function o(t){if(null!=t){var e=r.getStep(t);return n.isActionStep(e)}return!1}}t.exports=r},function(t,e){function r(t,e,r,n,a){var i=this;function o(){}i.findFirstStep=function(t,n,a){return n=n?n:0,r.checkIfStepExistsWithSkippables(t,n,void 0,void 0,a,e.CHECK_STEP_MODE.Normal)},o.apply(null,arguments)}t.exports=r},function(t,e){function r(t,e,r,n,a){var i=this;i.register=o;function o(){n.add({linkSelector:".walkme-action-start-wt",idDataKey:"data-walkthru-id",clickEvent:a.EVENTS.BBCodeStartActionClicked.Walkthru,activator:s})}function s(n,a){var i=t.mapBbcodeInitiator(a);e.deprecatedRaiseEvent("switchToWalkthru",n),r.afterStepsLoaded(n,function(){WalkMeAPI.startWalkthruById({id:n,fromStep:0,playInitiator:i})})}}t.exports=r},function(t,e){function r(t,e,r){var n=this;n.activate=o,n.canActivate=i,n.register=a;function a(){e.addActivator(n)}function i(e){return e==-1&&t.getCurrentWalkthru()}function o(e){var n=r.SURVEY_START_EVENTS.BbCodeClicked,a=t.getCurrentWalkthru(),i=a.Settings.survey&&a.Settings.survey.surveyId;_walkmeInternals.ctx.get("WalkthruSurveyActivator").activateSurvey(a,n,e,i,"always")}}t.exports=r},function(t,e){function r(t,e){var r=this;r.isEnabled=n,r.findElement=a;function n(e){return t.isPopupStep(e)}function a(){return e.get()}}t.exports=r},function(t,e){function r(t){var e=this;e.isEnabled=r,e.findElement=n;function r(e){return t.isActionStep(e)}function n(t){return _walkmeInternals.ctx.get("WalkthrusModule").getAction(t).isValid()}}t.exports=r},function(t,e,r){(function(e){function r(t,r,n,a,i,o,s,u,l,c,p,d,S,g,T,f,I,h,E,k,v,_,A,m,C,W,y,N,P,x){var R=this;R.init=U,R.postDataFileLoaded=M;var w,L;function O(){w=[n],L=[a,r,o,l,g,T,v,_,e.get("WalkthruActionClickedEventBinder")],L.push({register:function(){i.fixAnchorTagsOnBeforeUnload()}}),L.push({register:function(){u.addStopper({stop:function(){s.stopTutorial(!1,!0)}})}}),L.push({register:function(){c.init()}}),L.push({register:function(){_walkmeInternals.ctx.get("TutorialsManager").setDeployables(_walkmeInternals.ctx.get("WalkthrusContainer").getWalkthrus())}}),L.push({register:function(){p.addDeployable(d.Tutorial,S,d.BusinessSolution)}}),L.push({register:function(){k.register(h),k.register(E)}}),L.push({register:function(){I.addRestorer(f,!0)}}),L.push({register:function(){_walkmeInternals.ctx.get("WalkthruEventsInitializer").init()}}),L.push({register:function(){wmjQuery.extend(t,_walkmeInternals.ctx.get("WalkthruLegacyExternalApi")),window.WalkMeAPI&&wmjQuery.extend(window.WalkMeAPI,_walkmeInternals.ctx.get("WalkthruApi"))}}),L.push({register:function(){A.addOwnershipManager(m.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,C,!0)}}),L.push({register:function(){W.addSafeStartHandler(d.Tutorial,y)}}),L.push({register:function(){P.addAutoStartHelper(x,d.Tutorial)}})}function U(){D(w),N.one(m.EVENTS.DATA_FILES_LOADED,M)}function M(){D(L)}function D(t){wmjQuery.each(t,function(t,e){e.register()})}O()}t.exports=r}).call(e,r(2))},function(t,e){function r(t,e,r,n,a,i,o,s,u,l,c,p,d,S,g,T){var f=this;f.walkthruStarted=E,f.evaluateOwnership=v,f.evaluateOwnershipByPeeking=m,f.gainedOwnership=C,f.lostOwnership=y;var I;function h(){I=c.wrapCustomerLog(e.PASS_OWNERSHIP.LOG_FEATURE)}function E(t,r){return g.wrap(e.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,x(t,r),function(){return k(t,r)})}function k(n,a){var s=t.get().optimizedDetermineOwnership();return s||(i.state=e.WALKTHRU_STATE.WAITING_FOR_OWNERSHIP,i.currentWalkthru=n,i.currentStep=a,o.storeStateInCookie(),r.terminateTutorial(),i.state=e.WALKTHRU_STATE.NOT_RUNNING,t.get().reset()),s}function v(t,r){if(r)return g.wrap(e.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru,r,function(){return _(t)});return _(t)}function _(t){var e=A(),r=e?g.getCurrentStepData():R(),a=n.evaluateOwnership(r.step,r.walkthruId,e);return e||t||P(a),a}function A(){return g.getCurrent()==e.PASS_OWNERSHIP.PassOwnershipEntity.Walkthru}function m(){return(d.isFeatureEnabled("po_peek")||d.isFeatureEnabled("passOwnership"))&&n.isPassOwnershipStep(p.peekNextCookieStep())}function C(t,e,r){I("walkthru is gaining ownership with state "+i.state,3),r&&W(t,e)}function W(t,e){t?N():(I("ownership granted to: "+e,3),l.restoreStateFromCookie(u.getUserGuid()))}function y(){_walkmeInternals.ctx.get("WalkthrusModule").terminateTutorial()}function N(){_walkmeInternals.ctx.get("WalkthrusModule").setMember("dontContinueTutorial",!1),S.resumeTimeoutsArray("playTimeouts")}function P(t){switch(t){case e.PASS_OWNERSHIP.EvaluateOwnership.Owner:w();break;case e.PASS_OWNERSHIP.EvaluateOwnership.NotOwner:L()}}function x(t,e){var r=a.getWalkthruByIndex(t);return{walkthruId:r.Id,step:r.Steps[e]}}function R(){var t=T.getData(e.PASS_OWNERSHIP.PASS_OWNERSHIP_COOKIE,void 0,u.getUserGuid());if(t)return{walkthruId:t.tutorialId,step:s.getStepByWalkthruAndStepIds(t.tutorialId,t.stepId)}}function w(){r.stepWasCompleted(),r.executeTutorialNextStep()}function L(){i.state!=e.WALKTHRU_STATE.PASSING_OWNERSHIP&&i.currentStep++,i.state=e.WALKTHRU_STATE.PASSING_OWNERSHIP,o.storeStateInCookie()}h()}t.exports=r},function(t,e){function r(t,e,r,n){var a=this;a.peekNextCookieStep=o;function i(){}function o(a){try{a=a||0;var i=t.getData(e.STORAGE_KEYS.WALKTHRU_PERSISTENCE_DATA,{},n.getAllUserGuids()[0]),o=i[e.WALKTHRU_PERSISTANCE_DATA_FIELDS.CURRENT_TUTORIAL_COOKIE_NAME],s=r.getWalkthruById(o),u=i[e.WALKTHRU_PERSISTANCE_DATA_FIELDS.CURRENT_STEP_COOKIE_NAME],l=s.Steps[u+a];return l}catch(c){return null}}i()}t.exports=r},function(t,e){function r(t){var e=this;e.isPassOwnershipStep=r,e.evaluateOwnership=n;function r(e){return e&&e.Settings&&e.Settings.action&&e.Settings.action.actionType==t.STEP_ACTION.PassOwnership}function n(e,n,i){return i&&!r(e)?t.PASS_OWNERSHIP.EvaluateOwnership.CantBeDetermined:a(e,n)?t.PASS_OWNERSHIP.EvaluateOwnership.Owner:t.PASS_OWNERSHIP.EvaluateOwnership.NotOwner}function a(t,e){if(null===t)return _walkmeInternals.ctx.get("WalkthruStepsLoader").LoadStepsForWT(e),!1;try{return _makeTutorial.evaluateConditionTree(t.Settings.action.arguments.condition)}catch(r){return!0}}}t.exports=r},function(t,e){function r(t,e,r,n,a){var i=this;i.clearCache=u,i.checkShouldAutoStart=l;var o,s;function u(){o=void 0,s=void 0}function l(e,r,n){if(e!=t.Tutorial)return!0;return c(r,n)}function c(t,n){var i=e.getWalkthruIndexByWalkthruId(t.Id),o=r.checkTutorialSkipFirstStepCondition(i),s=r.checkTutorialRedirectCondition(i,!1),u=t.IsWelcomeStep,l=p(),c=!(l.state==a.WALKTHRU_STATE.RUNNING&&l.step==o)&&d(l,n)&&(s&&u||r.checkIfStepExistsWithSkippables(i,o,void 0,void 0,void 0,a.CHECK_STEP_MODE.Sandbox,"- Check if Exists with Skippables")>=o&&!s);return c}function p(){return o||(o=n.get()),o}function d(t,e){if(void 0!=s)return s;return s=t.state==a.WALKTHRU_STATE.PAUSED||t.state==a.WALKTHRU_STATE.NOT_RUNNING||!e&&r.checkIfStepExistsWithSkippables(t.tutorial,t.step,void 0,void 0,void 0,a.CHECK_STEP_MODE.Sandbox,"- Engagement")<0}}t.exports=r},function(t,e){function r(t,e,r){var n=this;n.get=a;function a(){var n=t.getPersistenceData();return r.state==e.WALKTHRU_STATE.PAUSED&&(n.state=r.state),n}}t.exports=r},function(t,e){function r(t,e,r){var n=this;n.isRunning=a;function a(){var n,a=t.get();return n=!(a.state==r.WALKTHRU_STATE.PAUSED||a.state==r.WALKTHRU_STATE.NOT_RUNNING||e.checkIfStepExistsWithSkippables(a.tutorial,a.step,void 0,void 0,void 0,r.CHECK_STEP_MODE.Sandbox,"- Engagement")<0),n?wmjQuery.when():wmjQuery.Deferred().reject()}}t.exports=r},function(t,e){function r(t,e){var r=this;r.fixAnchorTagsOnBeforeUnload=a;function n(){}function a(){if(t.isIE()){var r=mtjQuery("a[href^='javascript:']"),n="click.walkme.ignoreUnload";r.off(n),r.on(n,function(){e.setIgnoreNextBeforeUnload(!0)})}}n()}t.exports=r},function(t,e){function r(t,e,r){var n=this;n.register=a;function a(){r.addSupportedFunction("isStepPlayed",i)}function i(r){r=parseInt(r);for(var n=t.stepPlayHistory,a=0;a<n.length;a++){var i=e.getStepById(n[a]);if(i&&i.StepIndex==r)return!0}return!1}}t.exports=r},function(t,e){function r(t,e,r,n,a,i,o){var s=this;s.register=c;var u={};function l(){u.StepPlayed={handler:p},u.StepNotPlayed={handler:d},u.StepCompleted={handler:S},u.StepNotCompleted={handler:g},u.StepExists={handler:T,params:{editorPreview:!0}},u.StepNotExists={handler:f,params:{editorPreview:!0}},u.StepCanPlay={handler:I},u.StepCannotPlay={handler:h},u.StepIsVisible={handler:E,params:{editorPreview:!0}},u.StepIsNotVisible={handler:k,params:{editorPreview:!0}}}function c(){wmjQuery.each(u,function(t,r){e.register(t,r.handler,r.params)})}function p(t,e){for(var r=parseInt(e.funcArgs.StepId),n=i.stepPlayHistory,a=0;a<n.length;a++)if(n[a]==r)return void t.setValue(!0);t.setValue(!1)}function d(t,e){v(p,t,e)}function S(t,e){for(var r=parseInt(e.funcArgs.StepId,10),n=0;n<i.stepCompletedHistory.length;n++)if(i.stepCompletedHistory[n]==r)return void t.setValue(!0);t.setValue(!1)}function g(t,e){v(S,t,e)}function T(e,a){var i=parseInt(a.funcArgs.StepId),o=parseInt(a.funcArgs.TutorialId),s=r.getWalkthruById(o),u=n.getStepIndex(i,o);if(s&&u>-1){var l=s.Steps[u];return void e.setValue(t.findElement(l,!1)!==!1)}e.setValue(!1)}function f(t,e){v(T,t,e)}function I(t,e){var i=parseInt(e.funcArgs.StepId),s=parseInt(e.funcArgs.TutorialId),u=r.getWalkthruIndexByWalkthruId(s),l=n.getStepIndex(i,s);if(l>-1&&u>-1){var c=a.checkIfStepExistsWithSkippables(u,l,void 0,void 0,void 0,o.CHECK_STEP_MODE.Sandbox);if(c>=0)return void t.setValue(!0)}t.setValue(!1)}function h(t,e){v(I,t,e)}function E(e,a){var i=parseInt(a.funcArgs.StepId),o=parseInt(a.funcArgs.TutorialId),s=r.getWalkthruById(o),u=n.getStepIndex(i,o);if(s&&u>-1){var l=s.Steps[u];return void e.setValue(t.findElement(l,!0)!==!1)}e.setValue(!1)}function k(t,e){v(E,t,e)}function v(t,e,r){t(e,r),e.setValue(!e.getValue())}l()}t.exports=r},function(t,e){function r(t,e,r,n){var a=this;a.auditWalkthruStart=o;function i(){}function o(a,i,o,s,u){if(!n.isEnabled())return;var l=a.Steps;e.postEvent(e.EVENT_TYPES.Play,{type:e.getEventAppByDeployable(t.Tutorial),oId:a.TutorialId,oName:a.Name,pId:u||-1,pInit:r.map(i),oRequestedSubObject:l[o].Id,oActualSubObject:l[s].Id})}i.apply(null,arguments)}t.exports=r},function(t,e){function r(t,e,r,n,a,i,o,s,u,l,c,p,d,S,g){var T=this;T.safeStartAudit=v,T.auditStep=_,T.removeAllStepAuditsLogs=x,this._currentPlayGUID="",this._currentPlayInitiator=null,this.createPlayGuidIfNeeded=W;var f,I;function h(){f=r.wrapCustomerLog(a.LOG_FEATURES.AUDIT_STEPS),g.on(a.EVENTS.BeforeStorageLoadedCallback,E)}function E(){I=t.register("sa",{beforeSendingManipulationFunc:k,actionUrl:"/Statistics/AddStepsLogs",prefixForStorage:"sa",sendingThreshold:5,dataType:"step audit",dataIdFieldName:"Id",requestParamsFunc:function(t){return{stepActionsSerialized:i.toJSON(t),source:e.getEnvironmentId(),customFieldsSerialized:i.toJSON(e.getAnalyticsCustomFields()),browser:n.browser.string,os:n.os.name,domain:window.location.host,permutationId:e.getPermutationId(),endUserGuid:e.getEndUserGuid()}}})}function k(t,e){R(t,e)}function v(t,e){if(!S.isEnabled())return f("Audit steps manager - Auditing is disabled, doing nothing",3),!0;try{var n={tutorialId:e.TutorialId,tutorialName:e.Name,playGuid:T._currentPlayGUID,playInitiator:T._currentPlayInitiator,status:t};s.send(n)}catch(i){r.error(i)}try{var o=N(e.Id,-1,-1,a.STEP_STATUS.SupposedToShow,e.Steps.length,!1);o.SafeStartAction=t,I.sendData(o)}catch(i){r.error(i)}}function _(t,e,n,a){y(n,e);var o=t.Steps.length;if(!S.isEnabled())return f("Audit steps manager - Auditing is disabled, doing nothing",3),!0;if(e.TutorialId<0)return void f(i.formatString("Audit steps manager - Step with id {0} has negative tutorial id ({1})",e.Id,e.TutorialId),3);try{var s=N(e.TutorialId,e.Id,e.StepIndex+1,n,o,a);I.sendData(s);try{return A(e,t,o,n)}catch(u){return r.error(u,"Failed auditStep: stepId="+e.Id+", wtId="+t.TutorialId+", status="+n+", pId="+T._currentPlayGUID),!0}}catch(u){return r.error(u),u}}function A(t,e,r,n){var a=l.getSettingsValue(t.Settings,"action","");return o.postEvent(o.EVENT_TYPES.Play,{type:o.EVENT_APPS.Step,oId:t.Id,oName:t.StepTitle||"",aType:m(a),aAppType:C(a),oType:t.Type,indx:t.StepIndex+1,owId:e.TutorialId,owName:e.Name,owType:o.EVENT_APPS.Walkthru,total:r,status:n,pId:T._currentPlayGUID})}function m(t){return t?u.map(t.actionType):""}function C(t){return t?c.map(t.actionType):""}function W(t){void 0!=T._currentPlayGUID&&0!=T._currentPlayGUID.length||(T._currentPlayGUID=d.generateNewPlayGuid(t))}function y(t,e){if(t!=a.STEP_STATUS.SkippedByActionStep){var r=t==a.STEP_STATUS.SkippedStartedFromBiggerStep?"NewSkippedStep":"CheckNewStep";p.deprecatedRaiseEvent(r,e)}}function N(t,e,r,n,a,o){W(t);var s={};return s.tutorialID=t,s.stepId=e,s.stepIndex=r,s.totalSteps=a,s.playGuid=T._currentPlayGUID,s.TicksSince1970=i.getDateAtUTC(),s.StepStatus=n,P(s),i.defaultValue(o,!1)&&(s.isFirstStepError=!0),s}function P(t){if(!T._currentPlayInitiator||T._currentPlayInitiator.type==a.STEP_PLAY_INITIATOR_ENUM.NONE)return void(t.playInitiator=a.STEP_PLAY_INITIATOR_ENUM.NONE);t.playInitiator=T._currentPlayInitiator.type,void 0!=T._currentPlayInitiator.objectId&&T._currentPlayInitiator.objectId>-1&&(t.initObjId=T._currentPlayInitiator.objectId)}function x(){I.clearAndStopSavingData()}function R(t,e){var r=[];if(t.length<=0)return r;for(var n=0;n<t.length;n++)t[n].stepIndex==e.stepIndex&&t[n].playGuid==e.playGuid&&(r.push(t.splice(n,1)[0]),n--);return r}h.apply(null,arguments)}t.exports=r},function(t,e){function r(t,e,r,n){var a=this;a.register=i;function i(){t.add(r.ENTITY_TYPE.step,e.EVENT_SENDER_EVENT_APPS.Step,function(){return n._currentPlayGUID})}}t.exports=r}]));